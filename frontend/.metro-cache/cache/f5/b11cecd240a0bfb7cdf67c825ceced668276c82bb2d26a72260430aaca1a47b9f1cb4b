{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getCurrentSong\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentSong;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  const RADIO_BASE_URL = 'https://radio.trucksim.fm:8000';\n  /**\n   * Capitalize first letter of each word\n   */\n  const titleCase = str => {\n    return str.toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n  };\n\n  /**\n   * Fetch the current playing song from TruckSimFM\n   */\n  const getCurrentSong = async () => {\n    try {\n      const response = await axios.default.get(`${RADIO_BASE_URL}/currentsong?sid=1`, {\n        timeout: 5000\n      });\n\n      // The response might be in different formats, let's handle text\n      const data = response.data;\n      console.log('[RadioService] Current song raw data:', data);\n\n      // If it's a string, try to parse it\n      if (typeof data === 'string') {\n        const trimmed = data.trim();\n\n        // Common format: \"artist - title\" (case-insensitive)\n        const dashIndex = trimmed.indexOf(' - ');\n        if (dashIndex > 0) {\n          const artist = trimmed.substring(0, dashIndex).trim();\n          const title = trimmed.substring(dashIndex + 3).trim();\n          console.log('[RadioService] Parsed - Artist:', artist, 'Title:', title);\n          return {\n            artist: titleCase(artist),\n            title: titleCase(title),\n            rawData: data\n          };\n        }\n\n        // If no dash found, return as title\n        return {\n          title: titleCase(trimmed),\n          artist: 'Unknown Artist',\n          rawData: data\n        };\n      }\n\n      // If it's already an object\n      return {\n        title: data.title || data.song || '',\n        artist: data.artist || '',\n        album: data.album || '',\n        rawData: JSON.stringify(data)\n      };\n    } catch (error) {\n      console.error('[RadioService] Failed to fetch current song:', error);\n      return {\n        title: 'TruckSimFM',\n        artist: 'Live Radio'\n      };\n    }\n  };\n});","lineCount":81,"map":[[12,2,26,0,"Object"],[12,8,26,0],[12,9,26,0,"defineProperty"],[12,23,26,0],[12,24,26,0,"exports"],[12,31,26,0],[13,4,26,0,"enumerable"],[13,14,26,0],[14,4,26,0,"get"],[14,7,26,0],[14,18,26,0,"get"],[14,19,26,0],[15,6,26,0],[15,13,26,0,"getCurrentSong"],[15,27,26,0],[16,4,26,0],[17,2,26,0],[18,2,1,0],[18,6,1,0,"_axios"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,0],[19,6,1,0,"axios"],[19,11,1,0],[19,14,1,0,"_interopDefault"],[19,29,1,0],[19,30,1,0,"_axios"],[19,36,1,0],[20,2,3,0],[20,8,3,6,"RADIO_BASE_URL"],[20,22,3,20],[20,25,3,23],[20,57,3,55],[21,2,12,0],[22,0,13,0],[23,0,14,0],[24,2,15,0],[24,8,15,6,"titleCase"],[24,17,15,15],[24,20,15,19,"str"],[24,23,15,30],[24,27,15,43],[25,4,16,2],[25,11,16,9,"str"],[25,14,16,12],[25,15,17,5,"toLowerCase"],[25,26,17,16],[25,27,17,17],[25,28,17,18],[25,29,18,5,"split"],[25,34,18,10],[25,35,18,11],[25,38,18,14],[25,39,18,15],[25,40,19,5,"map"],[25,43,19,8],[25,44,19,9,"word"],[25,48,19,13],[25,52,19,17,"word"],[25,56,19,21],[25,57,19,22,"charAt"],[25,63,19,28],[25,64,19,29],[25,65,19,30],[25,66,19,31],[25,67,19,32,"toUpperCase"],[25,78,19,43],[25,79,19,44],[25,80,19,45],[25,83,19,48,"word"],[25,87,19,52],[25,88,19,53,"slice"],[25,93,19,58],[25,94,19,59],[25,95,19,60],[25,96,19,61],[25,97,19,62],[25,98,20,5,"join"],[25,102,20,9],[25,103,20,10],[25,106,20,13],[25,107,20,14],[26,2,21,0],[26,3,21,1],[28,2,23,0],[29,0,24,0],[30,0,25,0],[31,2,26,7],[31,8,26,13,"getCurrentSong"],[31,22,26,27],[31,25,26,30],[31,31,26,30,"getCurrentSong"],[31,32,26,30],[31,37,26,64],[32,4,27,2],[32,8,27,6],[33,6,28,4],[33,12,28,10,"response"],[33,20,28,18],[33,23,28,21],[33,29,28,27,"axios"],[33,34,28,32],[33,35,28,32,"default"],[33,42,28,32],[33,43,28,33,"get"],[33,46,28,36],[33,47,28,37],[33,50,28,40,"RADIO_BASE_URL"],[33,64,28,54],[33,84,28,74],[33,86,28,76],[34,8,29,6,"timeout"],[34,15,29,13],[34,17,29,15],[35,6,30,4],[35,7,30,5],[35,8,30,6],[37,6,32,4],[38,6,33,4],[38,12,33,10,"data"],[38,16,33,14],[38,19,33,17,"response"],[38,27,33,25],[38,28,33,26,"data"],[38,32,33,30],[39,6,34,4,"console"],[39,13,34,11],[39,14,34,12,"log"],[39,17,34,15],[39,18,34,16],[39,57,34,55],[39,59,34,57,"data"],[39,63,34,61],[39,64,34,62],[41,6,36,4],[42,6,37,4],[42,10,37,8],[42,17,37,15,"data"],[42,21,37,19],[42,26,37,24],[42,34,37,32],[42,36,37,34],[43,8,38,6],[43,14,38,12,"trimmed"],[43,21,38,19],[43,24,38,22,"data"],[43,28,38,26],[43,29,38,27,"trim"],[43,33,38,31],[43,34,38,32],[43,35,38,33],[45,8,40,6],[46,8,41,6],[46,14,41,12,"dashIndex"],[46,23,41,21],[46,26,41,24,"trimmed"],[46,33,41,31],[46,34,41,32,"indexOf"],[46,41,41,39],[46,42,41,40],[46,47,41,45],[46,48,41,46],[47,8,42,6],[47,12,42,10,"dashIndex"],[47,21,42,19],[47,24,42,22],[47,25,42,23],[47,27,42,25],[48,10,43,8],[48,16,43,14,"artist"],[48,22,43,20],[48,25,43,23,"trimmed"],[48,32,43,30],[48,33,43,31,"substring"],[48,42,43,40],[48,43,43,41],[48,44,43,42],[48,46,43,44,"dashIndex"],[48,55,43,53],[48,56,43,54],[48,57,43,55,"trim"],[48,61,43,59],[48,62,43,60],[48,63,43,61],[49,10,44,8],[49,16,44,14,"title"],[49,21,44,19],[49,24,44,22,"trimmed"],[49,31,44,29],[49,32,44,30,"substring"],[49,41,44,39],[49,42,44,40,"dashIndex"],[49,51,44,49],[49,54,44,52],[49,55,44,53],[49,56,44,54],[49,57,44,55,"trim"],[49,61,44,59],[49,62,44,60],[49,63,44,61],[50,10,46,8,"console"],[50,17,46,15],[50,18,46,16,"log"],[50,21,46,19],[50,22,46,20],[50,55,46,53],[50,57,46,55,"artist"],[50,63,46,61],[50,65,46,63],[50,73,46,71],[50,75,46,73,"title"],[50,80,46,78],[50,81,46,79],[51,10,48,8],[51,17,48,15],[52,12,49,10,"artist"],[52,18,49,16],[52,20,49,18,"titleCase"],[52,29,49,27],[52,30,49,28,"artist"],[52,36,49,34],[52,37,49,35],[53,12,50,10,"title"],[53,17,50,15],[53,19,50,17,"titleCase"],[53,28,50,26],[53,29,50,27,"title"],[53,34,50,32],[53,35,50,33],[54,12,51,10,"rawData"],[54,19,51,17],[54,21,51,19,"data"],[55,10,52,8],[55,11,52,9],[56,8,53,6],[58,8,55,6],[59,8,56,6],[59,15,56,13],[60,10,57,8,"title"],[60,15,57,13],[60,17,57,15,"titleCase"],[60,26,57,24],[60,27,57,25,"trimmed"],[60,34,57,32],[60,35,57,33],[61,10,58,8,"artist"],[61,16,58,14],[61,18,58,16],[61,34,58,32],[62,10,59,8,"rawData"],[62,17,59,15],[62,19,59,17,"data"],[63,8,60,6],[63,9,60,7],[64,6,61,4],[66,6,63,4],[67,6,64,4],[67,13,64,11],[68,8,65,6,"title"],[68,13,65,11],[68,15,65,13,"data"],[68,19,65,17],[68,20,65,18,"title"],[68,25,65,23],[68,29,65,27,"data"],[68,33,65,31],[68,34,65,32,"song"],[68,38,65,36],[68,42,65,40],[68,44,65,42],[69,8,66,6,"artist"],[69,14,66,12],[69,16,66,14,"data"],[69,20,66,18],[69,21,66,19,"artist"],[69,27,66,25],[69,31,66,29],[69,33,66,31],[70,8,67,6,"album"],[70,13,67,11],[70,15,67,13,"data"],[70,19,67,17],[70,20,67,18,"album"],[70,25,67,23],[70,29,67,27],[70,31,67,29],[71,8,68,6,"rawData"],[71,15,68,13],[71,17,68,15,"JSON"],[71,21,68,19],[71,22,68,20,"stringify"],[71,31,68,29],[71,32,68,30,"data"],[71,36,68,34],[72,6,69,4],[72,7,69,5],[73,4,70,2],[73,5,70,3],[73,6,70,4],[73,13,70,11,"error"],[73,18,70,16],[73,20,70,18],[74,6,71,4,"console"],[74,13,71,11],[74,14,71,12,"error"],[74,19,71,17],[74,20,71,18],[74,66,71,64],[74,68,71,66,"error"],[74,73,71,71],[74,74,71,72],[75,6,72,4],[75,13,72,11],[76,8,73,6,"title"],[76,13,73,11],[76,15,73,13],[76,27,73,25],[77,8,74,6,"artist"],[77,14,74,12],[77,16,74,14],[78,6,75,4],[78,7,75,5],[79,4,76,2],[80,2,77,0],[80,3,77,1],[81,0,77,2],[81,3]],"functionMap":{"names":["<global>","titleCase","str.toLowerCase.split.map$argument_0","getCurrentSong"],"mappings":"AAA;kBCc;SCI,oDD;CDE;8BGK;CHmD"},"hasCjsExports":false},"type":"js/module"}]}