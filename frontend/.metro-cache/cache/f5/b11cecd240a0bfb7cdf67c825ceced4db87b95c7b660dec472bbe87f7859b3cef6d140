{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getCurrentSong\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentSong;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Smart title case that preserves certain patterns\n   */\n  const smartTitleCase = str => {\n    // Preserve common patterns\n    const preservePatterns = ['DJ', 'MC', 'ft', 'feat', 'vs', 'x'];\n    return str.split(' ').map(word => {\n      const lower = word.toLowerCase();\n\n      // Check if it's a special pattern to preserve\n      if (preservePatterns.some(p => lower === p || lower === p + '.')) {\n        return lower;\n      }\n\n      // Handle words with parentheses or brackets\n      if (word.includes('(') || word.includes('[')) {\n        return word.split(/([(\\[])/g).map(part => {\n          if (part === '(' || part === '[') return part;\n          return part.charAt(0).toUpperCase() + part.slice(1).toLowerCase();\n        }).join('');\n      }\n\n      // Regular title case\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    }).join(' ');\n  };\n\n  /**\n   * Parse artist - title format with all variations\n   */\n  const parseSongString = text => {\n    // Try different separator patterns\n    const separators = [' - ', ' – ', ' — ', ' | ', ' / '];\n    for (const sep of separators) {\n      const index = text.indexOf(sep);\n      if (index > 0) {\n        const artist = text.substring(0, index).trim();\n        const title = text.substring(index + sep.length).trim();\n        if (artist && title) {\n          return {\n            artist: smartTitleCase(artist),\n            title: smartTitleCase(title)\n          };\n        }\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Fetch the current playing song from TruckSimFM via backend proxy\n   */\n  const getCurrentSong = async () => {\n    try {\n      console.log('[RadioService] Fetching from backend:', `${BACKEND_URL}/api/current-song`);\n      const response = await axios.default.get(`${BACKEND_URL}/api/current-song`, {\n        timeout: 8000\n      });\n      console.log('[RadioService] Response:', response.data);\n      if (!response.data || !response.data.success) {\n        throw new Error('Backend returned unsuccessful response');\n      }\n      const songText = response.data.data;\n      console.log('[RadioService] Song text:', songText);\n      if (typeof songText === 'string') {\n        const trimmed = songText.trim();\n\n        // Try to parse it\n        const parsed = parseSongString(trimmed);\n        if (parsed) {\n          console.log('[RadioService] Parsed successfully:', parsed);\n          return {\n            artist: parsed.artist,\n            title: parsed.title,\n            rawData: songText\n          };\n        }\n        console.log('[RadioService] Could not parse, returning as title only');\n        // If parsing fails, return as title\n        return {\n          title: smartTitleCase(trimmed),\n          artist: 'Unknown Artist',\n          rawData: songText\n        };\n      }\n      console.log('[RadioService] Unexpected data format');\n      throw new Error('Unexpected data format');\n    } catch (error) {\n      console.error('[RadioService] Error:', error);\n      if (axios.default.isAxiosError(error)) {\n        console.error('[RadioService] Axios error:', {\n          message: error.message,\n          status: error.response?.status,\n          data: error.response?.data\n        });\n      }\n      return {\n        title: 'TruckSimFM',\n        artist: 'Live Radio'\n      };\n    }\n  };\n});","lineCount":124,"map":[[12,2,71,0,"Object"],[12,8,71,0],[12,9,71,0,"defineProperty"],[12,23,71,0],[12,24,71,0,"exports"],[12,31,71,0],[13,4,71,0,"enumerable"],[13,14,71,0],[14,4,71,0,"get"],[14,7,71,0],[14,18,71,0,"get"],[14,19,71,0],[15,6,71,0],[15,13,71,0,"getCurrentSong"],[15,27,71,0],[16,4,71,0],[17,2,71,0],[18,2,129,2],[18,6,129,2,"_expoVirtualEnv"],[18,21,129,2],[18,24,129,2,"require"],[18,31,129,2],[18,32,129,2,"_dependencyMap"],[18,46,129,2],[19,2,1,0],[19,6,1,0,"_axios"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,0],[20,6,1,0,"axios"],[20,11,1,0],[20,14,1,0,"_interopDefault"],[20,29,1,0],[20,30,1,0,"_axios"],[20,36,1,0],[21,2,3,0],[21,8,3,6,"BACKEND_URL"],[21,19,3,17],[21,22,3,20,"_expoVirtualEnv"],[21,37,3,20],[21,38,3,20,"env"],[21,41,3,20],[21,42,3,20,"EXPO_PUBLIC_BACKEND_URL"],[21,65,3,20],[21,69,3,59],[21,71,3,61],[22,2,12,0],[23,0,13,0],[24,0,14,0],[25,2,15,0],[25,8,15,6,"smartTitleCase"],[25,22,15,20],[25,25,15,24,"str"],[25,28,15,35],[25,32,15,48],[26,4,16,2],[27,4,17,2],[27,10,17,8,"preservePatterns"],[27,26,17,24],[27,29,17,27],[27,30,17,28],[27,34,17,32],[27,36,17,34],[27,40,17,38],[27,42,17,40],[27,46,17,44],[27,48,17,46],[27,54,17,52],[27,56,17,54],[27,60,17,58],[27,62,17,60],[27,65,17,63],[27,66,17,64],[28,4,19,2],[28,11,19,9,"str"],[28,14,19,12],[28,15,20,5,"split"],[28,20,20,10],[28,21,20,11],[28,24,20,14],[28,25,20,15],[28,26,21,5,"map"],[28,29,21,8],[28,30,21,9,"word"],[28,34,21,13],[28,38,21,17],[29,6,22,6],[29,12,22,12,"lower"],[29,17,22,17],[29,20,22,20,"word"],[29,24,22,24],[29,25,22,25,"toLowerCase"],[29,36,22,36],[29,37,22,37],[29,38,22,38],[31,6,24,6],[32,6,25,6],[32,10,25,10,"preservePatterns"],[32,26,25,26],[32,27,25,27,"some"],[32,31,25,31],[32,32,25,32,"p"],[32,33,25,33],[32,37,25,37,"lower"],[32,42,25,42],[32,47,25,47,"p"],[32,48,25,48],[32,52,25,52,"lower"],[32,57,25,57],[32,62,25,62,"p"],[32,63,25,63],[32,66,25,66],[32,69,25,69],[32,70,25,70],[32,72,25,72],[33,8,26,8],[33,15,26,15,"lower"],[33,20,26,20],[34,6,27,6],[36,6,29,6],[37,6,30,6],[37,10,30,10,"word"],[37,14,30,14],[37,15,30,15,"includes"],[37,23,30,23],[37,24,30,24],[37,27,30,27],[37,28,30,28],[37,32,30,32,"word"],[37,36,30,36],[37,37,30,37,"includes"],[37,45,30,45],[37,46,30,46],[37,49,30,49],[37,50,30,50],[37,52,30,52],[38,8,31,8],[38,15,31,15,"word"],[38,19,31,19],[38,20,31,20,"split"],[38,25,31,25],[38,26,31,26],[38,36,31,36],[38,37,31,37],[38,38,31,38,"map"],[38,41,31,41],[38,42,31,42,"part"],[38,46,31,46],[38,50,31,50],[39,10,32,10],[39,14,32,14,"part"],[39,18,32,18],[39,23,32,23],[39,26,32,26],[39,30,32,30,"part"],[39,34,32,34],[39,39,32,39],[39,42,32,42],[39,44,32,44],[39,51,32,51,"part"],[39,55,32,55],[40,10,33,10],[40,17,33,17,"part"],[40,21,33,21],[40,22,33,22,"charAt"],[40,28,33,28],[40,29,33,29],[40,30,33,30],[40,31,33,31],[40,32,33,32,"toUpperCase"],[40,43,33,43],[40,44,33,44],[40,45,33,45],[40,48,33,48,"part"],[40,52,33,52],[40,53,33,53,"slice"],[40,58,33,58],[40,59,33,59],[40,60,33,60],[40,61,33,61],[40,62,33,62,"toLowerCase"],[40,73,33,73],[40,74,33,74],[40,75,33,75],[41,8,34,8],[41,9,34,9],[41,10,34,10],[41,11,34,11,"join"],[41,15,34,15],[41,16,34,16],[41,18,34,18],[41,19,34,19],[42,6,35,6],[44,6,37,6],[45,6,38,6],[45,13,38,13,"word"],[45,17,38,17],[45,18,38,18,"charAt"],[45,24,38,24],[45,25,38,25],[45,26,38,26],[45,27,38,27],[45,28,38,28,"toUpperCase"],[45,39,38,39],[45,40,38,40],[45,41,38,41],[45,44,38,44,"word"],[45,48,38,48],[45,49,38,49,"slice"],[45,54,38,54],[45,55,38,55],[45,56,38,56],[45,57,38,57],[45,58,38,58,"toLowerCase"],[45,69,38,69],[45,70,38,70],[45,71,38,71],[46,4,39,4],[46,5,39,5],[46,6,39,6],[46,7,40,5,"join"],[46,11,40,9],[46,12,40,10],[46,15,40,13],[46,16,40,14],[47,2,41,0],[47,3,41,1],[49,2,43,0],[50,0,44,0],[51,0,45,0],[52,2,46,0],[52,8,46,6,"parseSongString"],[52,23,46,21],[52,26,46,25,"text"],[52,30,46,37],[52,34,46,84],[53,4,47,2],[54,4,48,2],[54,10,48,8,"separators"],[54,20,48,18],[54,23,48,21],[54,24,48,22],[54,29,48,27],[54,31,48,29],[54,36,48,34],[54,38,48,36],[54,43,48,41],[54,45,48,43],[54,50,48,48],[54,52,48,50],[54,57,48,55],[54,58,48,56],[55,4,50,2],[55,9,50,7],[55,15,50,13,"sep"],[55,18,50,16],[55,22,50,20,"separators"],[55,32,50,30],[55,34,50,32],[56,6,51,4],[56,12,51,10,"index"],[56,17,51,15],[56,20,51,18,"text"],[56,24,51,22],[56,25,51,23,"indexOf"],[56,32,51,30],[56,33,51,31,"sep"],[56,36,51,34],[56,37,51,35],[57,6,52,4],[57,10,52,8,"index"],[57,15,52,13],[57,18,52,16],[57,19,52,17],[57,21,52,19],[58,8,53,6],[58,14,53,12,"artist"],[58,20,53,18],[58,23,53,21,"text"],[58,27,53,25],[58,28,53,26,"substring"],[58,37,53,35],[58,38,53,36],[58,39,53,37],[58,41,53,39,"index"],[58,46,53,44],[58,47,53,45],[58,48,53,46,"trim"],[58,52,53,50],[58,53,53,51],[58,54,53,52],[59,8,54,6],[59,14,54,12,"title"],[59,19,54,17],[59,22,54,20,"text"],[59,26,54,24],[59,27,54,25,"substring"],[59,36,54,34],[59,37,54,35,"index"],[59,42,54,40],[59,45,54,43,"sep"],[59,48,54,46],[59,49,54,47,"length"],[59,55,54,53],[59,56,54,54],[59,57,54,55,"trim"],[59,61,54,59],[59,62,54,60],[59,63,54,61],[60,8,56,6],[60,12,56,10,"artist"],[60,18,56,16],[60,22,56,20,"title"],[60,27,56,25],[60,29,56,27],[61,10,57,8],[61,17,57,15],[62,12,58,10,"artist"],[62,18,58,16],[62,20,58,18,"smartTitleCase"],[62,34,58,32],[62,35,58,33,"artist"],[62,41,58,39],[62,42,58,40],[63,12,59,10,"title"],[63,17,59,15],[63,19,59,17,"smartTitleCase"],[63,33,59,31],[63,34,59,32,"title"],[63,39,59,37],[64,10,60,8],[64,11,60,9],[65,8,61,6],[66,6,62,4],[67,4,63,2],[68,4,65,2],[68,11,65,9],[68,15,65,13],[69,2,66,0],[69,3,66,1],[71,2,68,0],[72,0,69,0],[73,0,70,0],[74,2,71,7],[74,8,71,13,"getCurrentSong"],[74,22,71,27],[74,25,71,30],[74,31,71,30,"getCurrentSong"],[74,32,71,30],[74,37,71,64],[75,4,72,2],[75,8,72,6],[76,6,73,4,"console"],[76,13,73,11],[76,14,73,12,"log"],[76,17,73,15],[76,18,73,16],[76,57,73,55],[76,59,73,57],[76,62,73,60,"BACKEND_URL"],[76,73,73,71],[76,92,73,90],[76,93,73,91],[77,6,75,4],[77,12,75,10,"response"],[77,20,75,18],[77,23,75,21],[77,29,75,27,"axios"],[77,34,75,32],[77,35,75,32,"default"],[77,42,75,32],[77,43,75,33,"get"],[77,46,75,36],[77,47,75,37],[77,50,75,40,"BACKEND_URL"],[77,61,75,51],[77,80,75,70],[77,82,75,72],[78,8,76,6,"timeout"],[78,15,76,13],[78,17,76,15],[79,6,77,4],[79,7,77,5],[79,8,77,6],[80,6,79,4,"console"],[80,13,79,11],[80,14,79,12,"log"],[80,17,79,15],[80,18,79,16],[80,44,79,42],[80,46,79,44,"response"],[80,54,79,52],[80,55,79,53,"data"],[80,59,79,57],[80,60,79,58],[81,6,81,4],[81,10,81,8],[81,11,81,9,"response"],[81,19,81,17],[81,20,81,18,"data"],[81,24,81,22],[81,28,81,26],[81,29,81,27,"response"],[81,37,81,35],[81,38,81,36,"data"],[81,42,81,40],[81,43,81,41,"success"],[81,50,81,48],[81,52,81,50],[82,8,82,6],[82,14,82,12],[82,18,82,16,"Error"],[82,23,82,21],[82,24,82,22],[82,64,82,62],[82,65,82,63],[83,6,83,4],[84,6,85,4],[84,12,85,10,"songText"],[84,20,85,18],[84,23,85,21,"response"],[84,31,85,29],[84,32,85,30,"data"],[84,36,85,34],[84,37,85,35,"data"],[84,41,85,39],[85,6,86,4,"console"],[85,13,86,11],[85,14,86,12,"log"],[85,17,86,15],[85,18,86,16],[85,45,86,43],[85,47,86,45,"songText"],[85,55,86,53],[85,56,86,54],[86,6,88,4],[86,10,88,8],[86,17,88,15,"songText"],[86,25,88,23],[86,30,88,28],[86,38,88,36],[86,40,88,38],[87,8,89,6],[87,14,89,12,"trimmed"],[87,21,89,19],[87,24,89,22,"songText"],[87,32,89,30],[87,33,89,31,"trim"],[87,37,89,35],[87,38,89,36],[87,39,89,37],[89,8,91,6],[90,8,92,6],[90,14,92,12,"parsed"],[90,20,92,18],[90,23,92,21,"parseSongString"],[90,38,92,36],[90,39,92,37,"trimmed"],[90,46,92,44],[90,47,92,45],[91,8,94,6],[91,12,94,10,"parsed"],[91,18,94,16],[91,20,94,18],[92,10,95,8,"console"],[92,17,95,15],[92,18,95,16,"log"],[92,21,95,19],[92,22,95,20],[92,59,95,57],[92,61,95,59,"parsed"],[92,67,95,65],[92,68,95,66],[93,10,96,8],[93,17,96,15],[94,12,97,10,"artist"],[94,18,97,16],[94,20,97,18,"parsed"],[94,26,97,24],[94,27,97,25,"artist"],[94,33,97,31],[95,12,98,10,"title"],[95,17,98,15],[95,19,98,17,"parsed"],[95,25,98,23],[95,26,98,24,"title"],[95,31,98,29],[96,12,99,10,"rawData"],[96,19,99,17],[96,21,99,19,"songText"],[97,10,100,8],[97,11,100,9],[98,8,101,6],[99,8,103,6,"console"],[99,15,103,13],[99,16,103,14,"log"],[99,19,103,17],[99,20,103,18],[99,77,103,75],[99,78,103,76],[100,8,104,6],[101,8,105,6],[101,15,105,13],[102,10,106,8,"title"],[102,15,106,13],[102,17,106,15,"smartTitleCase"],[102,31,106,29],[102,32,106,30,"trimmed"],[102,39,106,37],[102,40,106,38],[103,10,107,8,"artist"],[103,16,107,14],[103,18,107,16],[103,34,107,32],[104,10,108,8,"rawData"],[104,17,108,15],[104,19,108,17,"songText"],[105,8,109,6],[105,9,109,7],[106,6,110,4],[107,6,112,4,"console"],[107,13,112,11],[107,14,112,12,"log"],[107,17,112,15],[107,18,112,16],[107,57,112,55],[107,58,112,56],[108,6,113,4],[108,12,113,10],[108,16,113,14,"Error"],[108,21,113,19],[108,22,113,20],[108,46,113,44],[108,47,113,45],[109,4,115,2],[109,5,115,3],[109,6,115,4],[109,13,115,11,"error"],[109,18,115,16],[109,20,115,18],[110,6,116,4,"console"],[110,13,116,11],[110,14,116,12,"error"],[110,19,116,17],[110,20,116,18],[110,43,116,41],[110,45,116,43,"error"],[110,50,116,48],[110,51,116,49],[111,6,117,4],[111,10,117,8,"axios"],[111,15,117,13],[111,16,117,13,"default"],[111,23,117,13],[111,24,117,14,"isAxiosError"],[111,36,117,26],[111,37,117,27,"error"],[111,42,117,32],[111,43,117,33],[111,45,117,35],[112,8,118,6,"console"],[112,15,118,13],[112,16,118,14,"error"],[112,21,118,19],[112,22,118,20],[112,51,118,49],[112,53,118,51],[113,10,119,8,"message"],[113,17,119,15],[113,19,119,17,"error"],[113,24,119,22],[113,25,119,23,"message"],[113,32,119,30],[114,10,120,8,"status"],[114,16,120,14],[114,18,120,16,"error"],[114,23,120,21],[114,24,120,22,"response"],[114,32,120,30],[114,34,120,32,"status"],[114,40,120,38],[115,10,121,8,"data"],[115,14,121,12],[115,16,121,14,"error"],[115,21,121,19],[115,22,121,20,"response"],[115,30,121,28],[115,32,121,30,"data"],[116,8,122,6],[116,9,122,7],[116,10,122,8],[117,6,123,4],[118,6,124,4],[118,13,124,11],[119,8,125,6,"title"],[119,13,125,11],[119,15,125,13],[119,27,125,25],[120,8,126,6,"artist"],[120,14,126,12],[120,16,126,14],[121,6,127,4],[121,7,127,5],[122,4,128,2],[123,2,129,0],[123,3,129,1],[124,0,129,2],[124,3]],"functionMap":{"names":["<global>","smartTitleCase","str.split.map$argument_0","preservePatterns.some$argument_0","word.split.map$argument_0","parseSongString","getCurrentSong"],"mappings":"AAA;uBCc;SCM;gCCI,qCD;0CEM;SFG;KDK;CDE;wBKK;CLoB;8BMK;CN0D"},"hasCjsExports":false},"type":"js/module"}]}