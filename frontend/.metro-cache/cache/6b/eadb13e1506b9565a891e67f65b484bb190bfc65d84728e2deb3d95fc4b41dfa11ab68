{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getCurrentSong\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentSong;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  const RADIO_BASE_URL = 'https://radio.trucksim.fm:8000';\n  /**\n   * Capitalize first letter of each word\n   */\n  const titleCase = str => {\n    return str.toLowerCase().split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ');\n  };\n\n  /**\n   * Fetch the current playing song from TruckSimFM\n   */\n  const getCurrentSong = async () => {\n    try {\n      const response = await axios.default.get(`${RADIO_BASE_URL}/currentsong?sid=1`, {\n        timeout: 5000\n      });\n      const data = response.data;\n      console.log('[RadioService] Raw response:', JSON.stringify(data));\n      console.log('[RadioService] Response type:', typeof data);\n\n      // If it's a string, try to parse it\n      if (typeof data === 'string') {\n        const trimmed = data.trim();\n        console.log('[RadioService] Trimmed string:', trimmed);\n\n        // Common format: \"artist - title\" (case-insensitive)\n        const dashIndex = trimmed.indexOf(' - ');\n        console.log('[RadioService] Dash index:', dashIndex);\n        if (dashIndex > 0) {\n          const artist = trimmed.substring(0, dashIndex).trim();\n          const title = trimmed.substring(dashIndex + 3).trim();\n          console.log('[RadioService] Parsed - Artist:', artist, 'Title:', title);\n          const result = {\n            artist: titleCase(artist),\n            title: titleCase(title),\n            rawData: data\n          };\n          console.log('[RadioService] Final result:', result);\n          return result;\n        }\n        console.log('[RadioService] No dash found, returning as title only');\n        // If no dash found, return as title\n        return {\n          title: titleCase(trimmed),\n          artist: 'Unknown Artist',\n          rawData: data\n        };\n      }\n      console.log('[RadioService] Data is object, not string');\n      // If it's already an object\n      return {\n        title: data.title || data.song || '',\n        artist: data.artist || '',\n        album: data.album || '',\n        rawData: JSON.stringify(data)\n      };\n    } catch (error) {\n      console.error('[RadioService] Error:', error);\n      if (axios.default.isAxiosError(error)) {\n        console.error('[RadioService] Axios error:', error.message, error.response?.status);\n      }\n      return {\n        title: 'TruckSimFM',\n        artist: 'Live Radio'\n      };\n    }\n  };\n});","lineCount":87,"map":[[12,2,26,0,"Object"],[12,8,26,0],[12,9,26,0,"defineProperty"],[12,23,26,0],[12,24,26,0,"exports"],[12,31,26,0],[13,4,26,0,"enumerable"],[13,14,26,0],[14,4,26,0,"get"],[14,7,26,0],[14,18,26,0,"get"],[14,19,26,0],[15,6,26,0],[15,13,26,0,"getCurrentSong"],[15,27,26,0],[16,4,26,0],[17,2,26,0],[18,2,1,0],[18,6,1,0,"_axios"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,0],[19,6,1,0,"axios"],[19,11,1,0],[19,14,1,0,"_interopDefault"],[19,29,1,0],[19,30,1,0,"_axios"],[19,36,1,0],[20,2,3,0],[20,8,3,6,"RADIO_BASE_URL"],[20,22,3,20],[20,25,3,23],[20,57,3,55],[21,2,12,0],[22,0,13,0],[23,0,14,0],[24,2,15,0],[24,8,15,6,"titleCase"],[24,17,15,15],[24,20,15,19,"str"],[24,23,15,30],[24,27,15,43],[25,4,16,2],[25,11,16,9,"str"],[25,14,16,12],[25,15,17,5,"toLowerCase"],[25,26,17,16],[25,27,17,17],[25,28,17,18],[25,29,18,5,"split"],[25,34,18,10],[25,35,18,11],[25,38,18,14],[25,39,18,15],[25,40,19,5,"map"],[25,43,19,8],[25,44,19,9,"word"],[25,48,19,13],[25,52,19,17,"word"],[25,56,19,21],[25,57,19,22,"charAt"],[25,63,19,28],[25,64,19,29],[25,65,19,30],[25,66,19,31],[25,67,19,32,"toUpperCase"],[25,78,19,43],[25,79,19,44],[25,80,19,45],[25,83,19,48,"word"],[25,87,19,52],[25,88,19,53,"slice"],[25,93,19,58],[25,94,19,59],[25,95,19,60],[25,96,19,61],[25,97,19,62],[25,98,20,5,"join"],[25,102,20,9],[25,103,20,10],[25,106,20,13],[25,107,20,14],[26,2,21,0],[26,3,21,1],[28,2,23,0],[29,0,24,0],[30,0,25,0],[31,2,26,7],[31,8,26,13,"getCurrentSong"],[31,22,26,27],[31,25,26,30],[31,31,26,30,"getCurrentSong"],[31,32,26,30],[31,37,26,64],[32,4,27,2],[32,8,27,6],[33,6,28,4],[33,12,28,10,"response"],[33,20,28,18],[33,23,28,21],[33,29,28,27,"axios"],[33,34,28,32],[33,35,28,32,"default"],[33,42,28,32],[33,43,28,33,"get"],[33,46,28,36],[33,47,28,37],[33,50,28,40,"RADIO_BASE_URL"],[33,64,28,54],[33,84,28,74],[33,86,28,76],[34,8,29,6,"timeout"],[34,15,29,13],[34,17,29,15],[35,6,30,4],[35,7,30,5],[35,8,30,6],[36,6,32,4],[36,12,32,10,"data"],[36,16,32,14],[36,19,32,17,"response"],[36,27,32,25],[36,28,32,26,"data"],[36,32,32,30],[37,6,33,4,"console"],[37,13,33,11],[37,14,33,12,"log"],[37,17,33,15],[37,18,33,16],[37,48,33,46],[37,50,33,48,"JSON"],[37,54,33,52],[37,55,33,53,"stringify"],[37,64,33,62],[37,65,33,63,"data"],[37,69,33,67],[37,70,33,68],[37,71,33,69],[38,6,34,4,"console"],[38,13,34,11],[38,14,34,12,"log"],[38,17,34,15],[38,18,34,16],[38,49,34,47],[38,51,34,49],[38,58,34,56,"data"],[38,62,34,60],[38,63,34,61],[40,6,36,4],[41,6,37,4],[41,10,37,8],[41,17,37,15,"data"],[41,21,37,19],[41,26,37,24],[41,34,37,32],[41,36,37,34],[42,8,38,6],[42,14,38,12,"trimmed"],[42,21,38,19],[42,24,38,22,"data"],[42,28,38,26],[42,29,38,27,"trim"],[42,33,38,31],[42,34,38,32],[42,35,38,33],[43,8,39,6,"console"],[43,15,39,13],[43,16,39,14,"log"],[43,19,39,17],[43,20,39,18],[43,52,39,50],[43,54,39,52,"trimmed"],[43,61,39,59],[43,62,39,60],[45,8,41,6],[46,8,42,6],[46,14,42,12,"dashIndex"],[46,23,42,21],[46,26,42,24,"trimmed"],[46,33,42,31],[46,34,42,32,"indexOf"],[46,41,42,39],[46,42,42,40],[46,47,42,45],[46,48,42,46],[47,8,43,6,"console"],[47,15,43,13],[47,16,43,14,"log"],[47,19,43,17],[47,20,43,18],[47,48,43,46],[47,50,43,48,"dashIndex"],[47,59,43,57],[47,60,43,58],[48,8,45,6],[48,12,45,10,"dashIndex"],[48,21,45,19],[48,24,45,22],[48,25,45,23],[48,27,45,25],[49,10,46,8],[49,16,46,14,"artist"],[49,22,46,20],[49,25,46,23,"trimmed"],[49,32,46,30],[49,33,46,31,"substring"],[49,42,46,40],[49,43,46,41],[49,44,46,42],[49,46,46,44,"dashIndex"],[49,55,46,53],[49,56,46,54],[49,57,46,55,"trim"],[49,61,46,59],[49,62,46,60],[49,63,46,61],[50,10,47,8],[50,16,47,14,"title"],[50,21,47,19],[50,24,47,22,"trimmed"],[50,31,47,29],[50,32,47,30,"substring"],[50,41,47,39],[50,42,47,40,"dashIndex"],[50,51,47,49],[50,54,47,52],[50,55,47,53],[50,56,47,54],[50,57,47,55,"trim"],[50,61,47,59],[50,62,47,60],[50,63,47,61],[51,10,49,8,"console"],[51,17,49,15],[51,18,49,16,"log"],[51,21,49,19],[51,22,49,20],[51,55,49,53],[51,57,49,55,"artist"],[51,63,49,61],[51,65,49,63],[51,73,49,71],[51,75,49,73,"title"],[51,80,49,78],[51,81,49,79],[52,10,51,8],[52,16,51,14,"result"],[52,22,51,20],[52,25,51,23],[53,12,52,10,"artist"],[53,18,52,16],[53,20,52,18,"titleCase"],[53,29,52,27],[53,30,52,28,"artist"],[53,36,52,34],[53,37,52,35],[54,12,53,10,"title"],[54,17,53,15],[54,19,53,17,"titleCase"],[54,28,53,26],[54,29,53,27,"title"],[54,34,53,32],[54,35,53,33],[55,12,54,10,"rawData"],[55,19,54,17],[55,21,54,19,"data"],[56,10,55,8],[56,11,55,9],[57,10,57,8,"console"],[57,17,57,15],[57,18,57,16,"log"],[57,21,57,19],[57,22,57,20],[57,52,57,50],[57,54,57,52,"result"],[57,60,57,58],[57,61,57,59],[58,10,58,8],[58,17,58,15,"result"],[58,23,58,21],[59,8,59,6],[60,8,61,6,"console"],[60,15,61,13],[60,16,61,14,"log"],[60,19,61,17],[60,20,61,18],[60,75,61,73],[60,76,61,74],[61,8,62,6],[62,8,63,6],[62,15,63,13],[63,10,64,8,"title"],[63,15,64,13],[63,17,64,15,"titleCase"],[63,26,64,24],[63,27,64,25,"trimmed"],[63,34,64,32],[63,35,64,33],[64,10,65,8,"artist"],[64,16,65,14],[64,18,65,16],[64,34,65,32],[65,10,66,8,"rawData"],[65,17,66,15],[65,19,66,17,"data"],[66,8,67,6],[66,9,67,7],[67,6,68,4],[68,6,70,4,"console"],[68,13,70,11],[68,14,70,12,"log"],[68,17,70,15],[68,18,70,16],[68,61,70,59],[68,62,70,60],[69,6,71,4],[70,6,72,4],[70,13,72,11],[71,8,73,6,"title"],[71,13,73,11],[71,15,73,13,"data"],[71,19,73,17],[71,20,73,18,"title"],[71,25,73,23],[71,29,73,27,"data"],[71,33,73,31],[71,34,73,32,"song"],[71,38,73,36],[71,42,73,40],[71,44,73,42],[72,8,74,6,"artist"],[72,14,74,12],[72,16,74,14,"data"],[72,20,74,18],[72,21,74,19,"artist"],[72,27,74,25],[72,31,74,29],[72,33,74,31],[73,8,75,6,"album"],[73,13,75,11],[73,15,75,13,"data"],[73,19,75,17],[73,20,75,18,"album"],[73,25,75,23],[73,29,75,27],[73,31,75,29],[74,8,76,6,"rawData"],[74,15,76,13],[74,17,76,15,"JSON"],[74,21,76,19],[74,22,76,20,"stringify"],[74,31,76,29],[74,32,76,30,"data"],[74,36,76,34],[75,6,77,4],[75,7,77,5],[76,4,78,2],[76,5,78,3],[76,6,78,4],[76,13,78,11,"error"],[76,18,78,16],[76,20,78,18],[77,6,79,4,"console"],[77,13,79,11],[77,14,79,12,"error"],[77,19,79,17],[77,20,79,18],[77,43,79,41],[77,45,79,43,"error"],[77,50,79,48],[77,51,79,49],[78,6,80,4],[78,10,80,8,"axios"],[78,15,80,13],[78,16,80,13,"default"],[78,23,80,13],[78,24,80,14,"isAxiosError"],[78,36,80,26],[78,37,80,27,"error"],[78,42,80,32],[78,43,80,33],[78,45,80,35],[79,8,81,6,"console"],[79,15,81,13],[79,16,81,14,"error"],[79,21,81,19],[79,22,81,20],[79,51,81,49],[79,53,81,51,"error"],[79,58,81,56],[79,59,81,57,"message"],[79,66,81,64],[79,68,81,66,"error"],[79,73,81,71],[79,74,81,72,"response"],[79,82,81,80],[79,84,81,82,"status"],[79,90,81,88],[79,91,81,89],[80,6,82,4],[81,6,83,4],[81,13,83,11],[82,8,84,6,"title"],[82,13,84,11],[82,15,84,13],[82,27,84,25],[83,8,85,6,"artist"],[83,14,85,12],[83,16,85,14],[84,6,86,4],[84,7,86,5],[85,4,87,2],[86,2,88,0],[86,3,88,1],[87,0,88,2],[87,3]],"functionMap":{"names":["<global>","titleCase","str.toLowerCase.split.map$argument_0","getCurrentSong"],"mappings":"AAA;kBCc;SCI,oDD;CDE;8BGK;CH8D"},"hasCjsExports":false},"type":"js/module"}]}