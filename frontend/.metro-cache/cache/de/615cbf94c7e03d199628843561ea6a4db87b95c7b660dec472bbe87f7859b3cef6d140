{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getCurrentSong\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentSong;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Smart title case that preserves certain patterns\n   */\n  const smartTitleCase = str => {\n    // Preserve common patterns\n    const preservePatterns = ['DJ', 'MC', 'ft', 'feat', 'vs', 'x'];\n    return str.split(' ').map(word => {\n      const lower = word.toLowerCase();\n\n      // Check if it's a special pattern to preserve\n      if (preservePatterns.some(p => lower === p || lower === p + '.')) {\n        return lower;\n      }\n\n      // Handle words with parentheses or brackets\n      if (word.includes('(') || word.includes('[')) {\n        return word.split(/([(\\[])/g).map(part => {\n          if (part === '(' || part === '[') return part;\n          return part.charAt(0).toUpperCase() + part.slice(1).toLowerCase();\n        }).join('');\n      }\n\n      // Regular title case\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    }).join(' ');\n  };\n\n  /**\n   * Parse artist - title format with all variations\n   */\n  const parseSongString = text => {\n    // Try different separator patterns\n    const separators = [' - ', ' – ', ' — ', ' | ', ' / '];\n    for (const sep of separators) {\n      const index = text.indexOf(sep);\n      if (index > 0) {\n        const artist = text.substring(0, index).trim();\n        const title = text.substring(index + sep.length).trim();\n        if (artist && title) {\n          return {\n            artist: smartTitleCase(artist),\n            title: smartTitleCase(title)\n          };\n        }\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Fetch the current playing song from TruckSimFM via backend proxy\n   */\n  const getCurrentSong = async () => {\n    try {\n      console.log('[RadioService] Fetching from backend:', `${BACKEND_URL}/api/current-song`);\n      const response = await axios.default.get(`${BACKEND_URL}/api/current-song`, {\n        timeout: 8000\n      });\n      console.log('[RadioService] Response:', response.data);\n      if (!response.data || !response.data.success) {\n        throw new Error('Backend returned unsuccessful response');\n      }\n      const songText = response.data.data;\n      console.log('[RadioService] Song text:', songText);\n      if (typeof songText === 'string') {\n        const trimmed = songText.trim();\n\n        // Try to parse it\n        const parsed = parseSongString(trimmed);\n        if (parsed) {\n          console.log('[RadioService] Parsed successfully:', parsed);\n          return {\n            artist: parsed.artist,\n            title: parsed.title,\n            rawData: songText\n          };\n        }\n        console.log('[RadioService] Could not parse, returning as title only');\n        // If parsing fails, return as title\n        return {\n          title: smartTitleCase(trimmed),\n          artist: 'Unknown Artist',\n          rawData: songText\n        };\n      }\n      console.log('[RadioService] Unexpected data format');\n      throw new Error('Unexpected data format');\n    } catch (error) {\n      console.error('[RadioService] Error:', error);\n      if (axios.default.isAxiosError(error)) {\n        console.error('[RadioService] Axios error:', {\n          message: error.message,\n          status: error.response?.status,\n          data: error.response?.data\n        });\n      }\n      return {\n        title: 'TruckSimFM',\n        artist: 'Live Radio'\n      };\n    }\n  };\n});","lineCount":123,"map":[[12,2,71,0,"Object"],[12,8,71,0],[12,9,71,0,"defineProperty"],[12,23,71,0],[12,24,71,0,"exports"],[12,31,71,0],[13,4,71,0,"enumerable"],[13,14,71,0],[14,4,71,0,"get"],[14,7,71,0],[14,18,71,0,"get"],[14,19,71,0],[15,6,71,0],[15,13,71,0,"getCurrentSong"],[15,27,71,0],[16,4,71,0],[17,2,71,0],[18,2,1,0],[18,6,1,0,"_axios"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,0],[19,6,1,0,"axios"],[19,11,1,0],[19,14,1,0,"_interopDefault"],[19,29,1,0],[19,30,1,0,"_axios"],[19,36,1,0],[20,2,3,0],[20,8,3,6,"BACKEND_URL"],[20,19,3,17],[20,22,3,20,"process"],[20,29,3,27],[20,30,3,28,"env"],[20,33,3,31],[20,34,3,32,"EXPO_PUBLIC_BACKEND_URL"],[20,57,3,55],[20,61,3,59],[20,63,3,61],[21,2,12,0],[22,0,13,0],[23,0,14,0],[24,2,15,0],[24,8,15,6,"smartTitleCase"],[24,22,15,20],[24,25,15,24,"str"],[24,28,15,35],[24,32,15,48],[25,4,16,2],[26,4,17,2],[26,10,17,8,"preservePatterns"],[26,26,17,24],[26,29,17,27],[26,30,17,28],[26,34,17,32],[26,36,17,34],[26,40,17,38],[26,42,17,40],[26,46,17,44],[26,48,17,46],[26,54,17,52],[26,56,17,54],[26,60,17,58],[26,62,17,60],[26,65,17,63],[26,66,17,64],[27,4,19,2],[27,11,19,9,"str"],[27,14,19,12],[27,15,20,5,"split"],[27,20,20,10],[27,21,20,11],[27,24,20,14],[27,25,20,15],[27,26,21,5,"map"],[27,29,21,8],[27,30,21,9,"word"],[27,34,21,13],[27,38,21,17],[28,6,22,6],[28,12,22,12,"lower"],[28,17,22,17],[28,20,22,20,"word"],[28,24,22,24],[28,25,22,25,"toLowerCase"],[28,36,22,36],[28,37,22,37],[28,38,22,38],[30,6,24,6],[31,6,25,6],[31,10,25,10,"preservePatterns"],[31,26,25,26],[31,27,25,27,"some"],[31,31,25,31],[31,32,25,32,"p"],[31,33,25,33],[31,37,25,37,"lower"],[31,42,25,42],[31,47,25,47,"p"],[31,48,25,48],[31,52,25,52,"lower"],[31,57,25,57],[31,62,25,62,"p"],[31,63,25,63],[31,66,25,66],[31,69,25,69],[31,70,25,70],[31,72,25,72],[32,8,26,8],[32,15,26,15,"lower"],[32,20,26,20],[33,6,27,6],[35,6,29,6],[36,6,30,6],[36,10,30,10,"word"],[36,14,30,14],[36,15,30,15,"includes"],[36,23,30,23],[36,24,30,24],[36,27,30,27],[36,28,30,28],[36,32,30,32,"word"],[36,36,30,36],[36,37,30,37,"includes"],[36,45,30,45],[36,46,30,46],[36,49,30,49],[36,50,30,50],[36,52,30,52],[37,8,31,8],[37,15,31,15,"word"],[37,19,31,19],[37,20,31,20,"split"],[37,25,31,25],[37,26,31,26],[37,36,31,36],[37,37,31,37],[37,38,31,38,"map"],[37,41,31,41],[37,42,31,42,"part"],[37,46,31,46],[37,50,31,50],[38,10,32,10],[38,14,32,14,"part"],[38,18,32,18],[38,23,32,23],[38,26,32,26],[38,30,32,30,"part"],[38,34,32,34],[38,39,32,39],[38,42,32,42],[38,44,32,44],[38,51,32,51,"part"],[38,55,32,55],[39,10,33,10],[39,17,33,17,"part"],[39,21,33,21],[39,22,33,22,"charAt"],[39,28,33,28],[39,29,33,29],[39,30,33,30],[39,31,33,31],[39,32,33,32,"toUpperCase"],[39,43,33,43],[39,44,33,44],[39,45,33,45],[39,48,33,48,"part"],[39,52,33,52],[39,53,33,53,"slice"],[39,58,33,58],[39,59,33,59],[39,60,33,60],[39,61,33,61],[39,62,33,62,"toLowerCase"],[39,73,33,73],[39,74,33,74],[39,75,33,75],[40,8,34,8],[40,9,34,9],[40,10,34,10],[40,11,34,11,"join"],[40,15,34,15],[40,16,34,16],[40,18,34,18],[40,19,34,19],[41,6,35,6],[43,6,37,6],[44,6,38,6],[44,13,38,13,"word"],[44,17,38,17],[44,18,38,18,"charAt"],[44,24,38,24],[44,25,38,25],[44,26,38,26],[44,27,38,27],[44,28,38,28,"toUpperCase"],[44,39,38,39],[44,40,38,40],[44,41,38,41],[44,44,38,44,"word"],[44,48,38,48],[44,49,38,49,"slice"],[44,54,38,54],[44,55,38,55],[44,56,38,56],[44,57,38,57],[44,58,38,58,"toLowerCase"],[44,69,38,69],[44,70,38,70],[44,71,38,71],[45,4,39,4],[45,5,39,5],[45,6,39,6],[45,7,40,5,"join"],[45,11,40,9],[45,12,40,10],[45,15,40,13],[45,16,40,14],[46,2,41,0],[46,3,41,1],[48,2,43,0],[49,0,44,0],[50,0,45,0],[51,2,46,0],[51,8,46,6,"parseSongString"],[51,23,46,21],[51,26,46,25,"text"],[51,30,46,37],[51,34,46,84],[52,4,47,2],[53,4,48,2],[53,10,48,8,"separators"],[53,20,48,18],[53,23,48,21],[53,24,48,22],[53,29,48,27],[53,31,48,29],[53,36,48,34],[53,38,48,36],[53,43,48,41],[53,45,48,43],[53,50,48,48],[53,52,48,50],[53,57,48,55],[53,58,48,56],[54,4,50,2],[54,9,50,7],[54,15,50,13,"sep"],[54,18,50,16],[54,22,50,20,"separators"],[54,32,50,30],[54,34,50,32],[55,6,51,4],[55,12,51,10,"index"],[55,17,51,15],[55,20,51,18,"text"],[55,24,51,22],[55,25,51,23,"indexOf"],[55,32,51,30],[55,33,51,31,"sep"],[55,36,51,34],[55,37,51,35],[56,6,52,4],[56,10,52,8,"index"],[56,15,52,13],[56,18,52,16],[56,19,52,17],[56,21,52,19],[57,8,53,6],[57,14,53,12,"artist"],[57,20,53,18],[57,23,53,21,"text"],[57,27,53,25],[57,28,53,26,"substring"],[57,37,53,35],[57,38,53,36],[57,39,53,37],[57,41,53,39,"index"],[57,46,53,44],[57,47,53,45],[57,48,53,46,"trim"],[57,52,53,50],[57,53,53,51],[57,54,53,52],[58,8,54,6],[58,14,54,12,"title"],[58,19,54,17],[58,22,54,20,"text"],[58,26,54,24],[58,27,54,25,"substring"],[58,36,54,34],[58,37,54,35,"index"],[58,42,54,40],[58,45,54,43,"sep"],[58,48,54,46],[58,49,54,47,"length"],[58,55,54,53],[58,56,54,54],[58,57,54,55,"trim"],[58,61,54,59],[58,62,54,60],[58,63,54,61],[59,8,56,6],[59,12,56,10,"artist"],[59,18,56,16],[59,22,56,20,"title"],[59,27,56,25],[59,29,56,27],[60,10,57,8],[60,17,57,15],[61,12,58,10,"artist"],[61,18,58,16],[61,20,58,18,"smartTitleCase"],[61,34,58,32],[61,35,58,33,"artist"],[61,41,58,39],[61,42,58,40],[62,12,59,10,"title"],[62,17,59,15],[62,19,59,17,"smartTitleCase"],[62,33,59,31],[62,34,59,32,"title"],[62,39,59,37],[63,10,60,8],[63,11,60,9],[64,8,61,6],[65,6,62,4],[66,4,63,2],[67,4,65,2],[67,11,65,9],[67,15,65,13],[68,2,66,0],[68,3,66,1],[70,2,68,0],[71,0,69,0],[72,0,70,0],[73,2,71,7],[73,8,71,13,"getCurrentSong"],[73,22,71,27],[73,25,71,30],[73,31,71,30,"getCurrentSong"],[73,32,71,30],[73,37,71,64],[74,4,72,2],[74,8,72,6],[75,6,73,4,"console"],[75,13,73,11],[75,14,73,12,"log"],[75,17,73,15],[75,18,73,16],[75,57,73,55],[75,59,73,57],[75,62,73,60,"BACKEND_URL"],[75,73,73,71],[75,92,73,90],[75,93,73,91],[76,6,75,4],[76,12,75,10,"response"],[76,20,75,18],[76,23,75,21],[76,29,75,27,"axios"],[76,34,75,32],[76,35,75,32,"default"],[76,42,75,32],[76,43,75,33,"get"],[76,46,75,36],[76,47,75,37],[76,50,75,40,"BACKEND_URL"],[76,61,75,51],[76,80,75,70],[76,82,75,72],[77,8,76,6,"timeout"],[77,15,76,13],[77,17,76,15],[78,6,77,4],[78,7,77,5],[78,8,77,6],[79,6,79,4,"console"],[79,13,79,11],[79,14,79,12,"log"],[79,17,79,15],[79,18,79,16],[79,44,79,42],[79,46,79,44,"response"],[79,54,79,52],[79,55,79,53,"data"],[79,59,79,57],[79,60,79,58],[80,6,81,4],[80,10,81,8],[80,11,81,9,"response"],[80,19,81,17],[80,20,81,18,"data"],[80,24,81,22],[80,28,81,26],[80,29,81,27,"response"],[80,37,81,35],[80,38,81,36,"data"],[80,42,81,40],[80,43,81,41,"success"],[80,50,81,48],[80,52,81,50],[81,8,82,6],[81,14,82,12],[81,18,82,16,"Error"],[81,23,82,21],[81,24,82,22],[81,64,82,62],[81,65,82,63],[82,6,83,4],[83,6,85,4],[83,12,85,10,"songText"],[83,20,85,18],[83,23,85,21,"response"],[83,31,85,29],[83,32,85,30,"data"],[83,36,85,34],[83,37,85,35,"data"],[83,41,85,39],[84,6,86,4,"console"],[84,13,86,11],[84,14,86,12,"log"],[84,17,86,15],[84,18,86,16],[84,45,86,43],[84,47,86,45,"songText"],[84,55,86,53],[84,56,86,54],[85,6,88,4],[85,10,88,8],[85,17,88,15,"songText"],[85,25,88,23],[85,30,88,28],[85,38,88,36],[85,40,88,38],[86,8,89,6],[86,14,89,12,"trimmed"],[86,21,89,19],[86,24,89,22,"songText"],[86,32,89,30],[86,33,89,31,"trim"],[86,37,89,35],[86,38,89,36],[86,39,89,37],[88,8,91,6],[89,8,92,6],[89,14,92,12,"parsed"],[89,20,92,18],[89,23,92,21,"parseSongString"],[89,38,92,36],[89,39,92,37,"trimmed"],[89,46,92,44],[89,47,92,45],[90,8,94,6],[90,12,94,10,"parsed"],[90,18,94,16],[90,20,94,18],[91,10,95,8,"console"],[91,17,95,15],[91,18,95,16,"log"],[91,21,95,19],[91,22,95,20],[91,59,95,57],[91,61,95,59,"parsed"],[91,67,95,65],[91,68,95,66],[92,10,96,8],[92,17,96,15],[93,12,97,10,"artist"],[93,18,97,16],[93,20,97,18,"parsed"],[93,26,97,24],[93,27,97,25,"artist"],[93,33,97,31],[94,12,98,10,"title"],[94,17,98,15],[94,19,98,17,"parsed"],[94,25,98,23],[94,26,98,24,"title"],[94,31,98,29],[95,12,99,10,"rawData"],[95,19,99,17],[95,21,99,19,"songText"],[96,10,100,8],[96,11,100,9],[97,8,101,6],[98,8,103,6,"console"],[98,15,103,13],[98,16,103,14,"log"],[98,19,103,17],[98,20,103,18],[98,77,103,75],[98,78,103,76],[99,8,104,6],[100,8,105,6],[100,15,105,13],[101,10,106,8,"title"],[101,15,106,13],[101,17,106,15,"smartTitleCase"],[101,31,106,29],[101,32,106,30,"trimmed"],[101,39,106,37],[101,40,106,38],[102,10,107,8,"artist"],[102,16,107,14],[102,18,107,16],[102,34,107,32],[103,10,108,8,"rawData"],[103,17,108,15],[103,19,108,17,"songText"],[104,8,109,6],[104,9,109,7],[105,6,110,4],[106,6,112,4,"console"],[106,13,112,11],[106,14,112,12,"log"],[106,17,112,15],[106,18,112,16],[106,57,112,55],[106,58,112,56],[107,6,113,4],[107,12,113,10],[107,16,113,14,"Error"],[107,21,113,19],[107,22,113,20],[107,46,113,44],[107,47,113,45],[108,4,115,2],[108,5,115,3],[108,6,115,4],[108,13,115,11,"error"],[108,18,115,16],[108,20,115,18],[109,6,116,4,"console"],[109,13,116,11],[109,14,116,12,"error"],[109,19,116,17],[109,20,116,18],[109,43,116,41],[109,45,116,43,"error"],[109,50,116,48],[109,51,116,49],[110,6,117,4],[110,10,117,8,"axios"],[110,15,117,13],[110,16,117,13,"default"],[110,23,117,13],[110,24,117,14,"isAxiosError"],[110,36,117,26],[110,37,117,27,"error"],[110,42,117,32],[110,43,117,33],[110,45,117,35],[111,8,118,6,"console"],[111,15,118,13],[111,16,118,14,"error"],[111,21,118,19],[111,22,118,20],[111,51,118,49],[111,53,118,51],[112,10,119,8,"message"],[112,17,119,15],[112,19,119,17,"error"],[112,24,119,22],[112,25,119,23,"message"],[112,32,119,30],[113,10,120,8,"status"],[113,16,120,14],[113,18,120,16,"error"],[113,23,120,21],[113,24,120,22,"response"],[113,32,120,30],[113,34,120,32,"status"],[113,40,120,38],[114,10,121,8,"data"],[114,14,121,12],[114,16,121,14,"error"],[114,21,121,19],[114,22,121,20,"response"],[114,30,121,28],[114,32,121,30,"data"],[115,8,122,6],[115,9,122,7],[115,10,122,8],[116,6,123,4],[117,6,124,4],[117,13,124,11],[118,8,125,6,"title"],[118,13,125,11],[118,15,125,13],[118,27,125,25],[119,8,126,6,"artist"],[119,14,126,12],[119,16,126,14],[120,6,127,4],[120,7,127,5],[121,4,128,2],[122,2,129,0],[122,3,129,1],[123,0,129,2],[123,3]],"functionMap":{"names":["<global>","smartTitleCase","str.split.map$argument_0","preservePatterns.some$argument_0","word.split.map$argument_0","parseSongString","getCurrentSong"],"mappings":"AAA;uBCc;SCM;gCCI,qCD;0CEM;SFG;KDK;CDE;wBKK;CLoB;8BMK;CN0D"},"hasCjsExports":false},"type":"js/module"}]}