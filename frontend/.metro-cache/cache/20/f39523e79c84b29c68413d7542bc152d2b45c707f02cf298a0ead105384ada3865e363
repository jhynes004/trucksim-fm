{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getRecentlyPlayed\", {\n    enumerable: true,\n    get: function () {\n      return getRecentlyPlayed;\n    }\n  });\n  Object.defineProperty(exports, \"likeSong\", {\n    enumerable: true,\n    get: function () {\n      return likeSong;\n    }\n  });\n  Object.defineProperty(exports, \"formatPlayedTime\", {\n    enumerable: true,\n    get: function () {\n      return formatPlayedTime;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Fetch recently played tracks from the TruckSimFM playlist\n   */\n  const getRecentlyPlayed = async (limit = 5) => {\n    try {\n      console.log('[RecentlyPlayedService] Fetching recently played tracks');\n      const response = await axios.default.get(`${BACKEND_URL}/api/recently-played`, {\n        params: {\n          limit\n        },\n        timeout: 10000\n      });\n      if (response.data && response.data.success && Array.isArray(response.data.data)) {\n        console.log(`[RecentlyPlayedService] Fetched ${response.data.data.length} tracks`);\n        return response.data.data;\n      }\n      console.log('[RecentlyPlayedService] Invalid response, returning empty array');\n      return [];\n    } catch (error) {\n      console.error('[RecentlyPlayedService] Error fetching recently played:', error);\n      return [];\n    }\n  };\n\n  /**\n   * Like a song on TruckSimFM\n   */\n  const likeSong = async documentId => {\n    try {\n      console.log('[RecentlyPlayedService] Liking song:', documentId);\n      const response = await axios.default.post(`${BACKEND_URL}/api/like-song/${documentId}`, {}, {\n        timeout: 10000\n      });\n      if (response.data && response.data.success) {\n        console.log('[RecentlyPlayedService] Song liked successfully, new count:', response.data.likes);\n        return {\n          success: true,\n          likes: response.data.likes\n        };\n      }\n      return {\n        success: false\n      };\n    } catch (error) {\n      console.error('[RecentlyPlayedService] Error liking song:', error);\n      return {\n        success: false\n      };\n    }\n  };\n\n  /**\n   * Format the played time as a relative string (e.g., \"2 min ago\")\n   */\n  const formatPlayedTime = isoTime => {\n    const played = new Date(isoTime);\n    const now = new Date();\n    const diffMs = now.getTime() - played.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    if (diffMins < 1) return 'Just now';\n    if (diffMins === 1) return '1 min ago';\n    if (diffMins < 60) return `${diffMins} min ago`;\n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours === 1) return '1 hour ago';\n    if (diffHours < 24) return `${diffHours} hours ago`;\n    const diffDays = Math.floor(diffHours / 24);\n    if (diffDays === 1) return '1 day ago';\n    return `${diffDays} days ago`;\n  };\n});","lineCount":103,"map":[[12,2,18,0,"Object"],[12,8,18,0],[12,9,18,0,"defineProperty"],[12,23,18,0],[12,24,18,0,"exports"],[12,31,18,0],[13,4,18,0,"enumerable"],[13,14,18,0],[14,4,18,0,"get"],[14,7,18,0],[14,18,18,0,"get"],[14,19,18,0],[15,6,18,0],[15,13,18,0,"getRecentlyPlayed"],[15,30,18,0],[16,4,18,0],[17,2,18,0],[18,2,44,0,"Object"],[18,8,44,0],[18,9,44,0,"defineProperty"],[18,23,44,0],[18,24,44,0,"exports"],[18,31,44,0],[19,4,44,0,"enumerable"],[19,14,44,0],[20,4,44,0,"get"],[20,7,44,0],[20,18,44,0,"get"],[20,19,44,0],[21,6,44,0],[21,13,44,0,"likeSong"],[21,21,44,0],[22,4,44,0],[23,2,44,0],[24,2,68,0,"Object"],[24,8,68,0],[24,9,68,0,"defineProperty"],[24,23,68,0],[24,24,68,0,"exports"],[24,31,68,0],[25,4,68,0,"enumerable"],[25,14,68,0],[26,4,68,0,"get"],[26,7,68,0],[26,18,68,0,"get"],[26,19,68,0],[27,6,68,0],[27,13,68,0,"formatPlayedTime"],[27,29,68,0],[28,4,68,0],[29,2,68,0],[30,2,85,2],[30,6,85,2,"_expoVirtualEnv"],[30,21,85,2],[30,24,85,2,"require"],[30,31,85,2],[30,32,85,2,"_dependencyMap"],[30,46,85,2],[31,2,1,0],[31,6,1,0,"_axios"],[31,12,1,0],[31,15,1,0,"require"],[31,22,1,0],[31,23,1,0,"_dependencyMap"],[31,37,1,0],[32,2,1,0],[32,6,1,0,"axios"],[32,11,1,0],[32,14,1,0,"_interopDefault"],[32,29,1,0],[32,30,1,0,"_axios"],[32,36,1,0],[33,2,3,0],[33,8,3,6,"BACKEND_URL"],[33,19,3,17],[33,22,3,20,"_expoVirtualEnv"],[33,37,3,20],[33,38,3,20,"env"],[33,41,3,20],[33,42,3,20,"EXPO_PUBLIC_BACKEND_URL"],[33,65,3,20],[33,69,3,59],[33,71,3,61],[34,2,15,0],[35,0,16,0],[36,0,17,0],[37,2,18,7],[37,8,18,13,"getRecentlyPlayed"],[37,25,18,30],[37,28,18,33],[37,34,18,33,"getRecentlyPlayed"],[37,35,18,40,"limit"],[37,40,18,53],[37,43,18,56],[37,44,18,57],[37,49,18,94],[38,4,19,2],[38,8,19,6],[39,6,20,4,"console"],[39,13,20,11],[39,14,20,12,"log"],[39,17,20,15],[39,18,20,16],[39,75,20,73],[39,76,20,74],[40,6,22,4],[40,12,22,10,"response"],[40,20,22,18],[40,23,22,21],[40,29,22,27,"axios"],[40,34,22,32],[40,35,22,32,"default"],[40,42,22,32],[40,43,22,33,"get"],[40,46,22,36],[40,47,22,37],[40,50,22,40,"BACKEND_URL"],[40,61,22,51],[40,83,22,73],[40,85,22,75],[41,8,23,6,"params"],[41,14,23,12],[41,16,23,14],[42,10,23,16,"limit"],[43,8,23,22],[43,9,23,23],[44,8,24,6,"timeout"],[44,15,24,13],[44,17,24,15],[45,6,25,4],[45,7,25,5],[45,8,25,6],[46,6,27,4],[46,10,27,8,"response"],[46,18,27,16],[46,19,27,17,"data"],[46,23,27,21],[46,27,27,25,"response"],[46,35,27,33],[46,36,27,34,"data"],[46,40,27,38],[46,41,27,39,"success"],[46,48,27,46],[46,52,27,50,"Array"],[46,57,27,55],[46,58,27,56,"isArray"],[46,65,27,63],[46,66,27,64,"response"],[46,74,27,72],[46,75,27,73,"data"],[46,79,27,77],[46,80,27,78,"data"],[46,84,27,82],[46,85,27,83],[46,87,27,85],[47,8,28,6,"console"],[47,15,28,13],[47,16,28,14,"log"],[47,19,28,17],[47,20,28,18],[47,55,28,53,"response"],[47,63,28,61],[47,64,28,62,"data"],[47,68,28,66],[47,69,28,67,"data"],[47,73,28,71],[47,74,28,72,"length"],[47,80,28,78],[47,89,28,87],[47,90,28,88],[48,8,29,6],[48,15,29,13,"response"],[48,23,29,21],[48,24,29,22,"data"],[48,28,29,26],[48,29,29,27,"data"],[48,33,29,31],[49,6,30,4],[50,6,32,4,"console"],[50,13,32,11],[50,14,32,12,"log"],[50,17,32,15],[50,18,32,16],[50,83,32,81],[50,84,32,82],[51,6,33,4],[51,13,33,11],[51,15,33,13],[52,4,35,2],[52,5,35,3],[52,6,35,4],[52,13,35,11,"error"],[52,18,35,16],[52,20,35,18],[53,6,36,4,"console"],[53,13,36,11],[53,14,36,12,"error"],[53,19,36,17],[53,20,36,18],[53,77,36,75],[53,79,36,77,"error"],[53,84,36,82],[53,85,36,83],[54,6,37,4],[54,13,37,11],[54,15,37,13],[55,4,38,2],[56,2,39,0],[56,3,39,1],[58,2,41,0],[59,0,42,0],[60,0,43,0],[61,2,44,7],[61,8,44,13,"likeSong"],[61,16,44,21],[61,19,44,24],[61,25,44,31,"documentId"],[61,35,44,49],[61,39,44,101],[62,4,45,2],[62,8,45,6],[63,6,46,4,"console"],[63,13,46,11],[63,14,46,12,"log"],[63,17,46,15],[63,18,46,16],[63,56,46,54],[63,58,46,56,"documentId"],[63,68,46,66],[63,69,46,67],[64,6,48,4],[64,12,48,10,"response"],[64,20,48,18],[64,23,48,21],[64,29,48,27,"axios"],[64,34,48,32],[64,35,48,32,"default"],[64,42,48,32],[64,43,48,33,"post"],[64,47,48,37],[64,48,48,38],[64,51,48,41,"BACKEND_URL"],[64,62,48,52],[64,80,48,70,"documentId"],[64,90,48,80],[64,92,48,82],[64,94,48,84],[64,95,48,85],[64,96,48,86],[64,98,48,88],[65,8,49,6,"timeout"],[65,15,49,13],[65,17,49,15],[66,6,50,4],[66,7,50,5],[66,8,50,6],[67,6,52,4],[67,10,52,8,"response"],[67,18,52,16],[67,19,52,17,"data"],[67,23,52,21],[67,27,52,25,"response"],[67,35,52,33],[67,36,52,34,"data"],[67,40,52,38],[67,41,52,39,"success"],[67,48,52,46],[67,50,52,48],[68,8,53,6,"console"],[68,15,53,13],[68,16,53,14,"log"],[68,19,53,17],[68,20,53,18],[68,81,53,79],[68,83,53,81,"response"],[68,91,53,89],[68,92,53,90,"data"],[68,96,53,94],[68,97,53,95,"likes"],[68,102,53,100],[68,103,53,101],[69,8,54,6],[69,15,54,13],[70,10,54,15,"success"],[70,17,54,22],[70,19,54,24],[70,23,54,28],[71,10,54,30,"likes"],[71,15,54,35],[71,17,54,37,"response"],[71,25,54,45],[71,26,54,46,"data"],[71,30,54,50],[71,31,54,51,"likes"],[72,8,54,57],[72,9,54,58],[73,6,55,4],[74,6,57,4],[74,13,57,11],[75,8,57,13,"success"],[75,15,57,20],[75,17,57,22],[76,6,57,28],[76,7,57,29],[77,4,59,2],[77,5,59,3],[77,6,59,4],[77,13,59,11,"error"],[77,18,59,16],[77,20,59,18],[78,6,60,4,"console"],[78,13,60,11],[78,14,60,12,"error"],[78,19,60,17],[78,20,60,18],[78,64,60,62],[78,66,60,64,"error"],[78,71,60,69],[78,72,60,70],[79,6,61,4],[79,13,61,11],[80,8,61,13,"success"],[80,15,61,20],[80,17,61,22],[81,6,61,28],[81,7,61,29],[82,4,62,2],[83,2,63,0],[83,3,63,1],[85,2,65,0],[86,0,66,0],[87,0,67,0],[88,2,68,7],[88,8,68,13,"formatPlayedTime"],[88,24,68,29],[88,27,68,33,"isoTime"],[88,34,68,48],[88,38,68,61],[89,4,69,2],[89,10,69,8,"played"],[89,16,69,14],[89,19,69,17],[89,23,69,21,"Date"],[89,27,69,25],[89,28,69,26,"isoTime"],[89,35,69,33],[89,36,69,34],[90,4,70,2],[90,10,70,8,"now"],[90,13,70,11],[90,16,70,14],[90,20,70,18,"Date"],[90,24,70,22],[90,25,70,23],[90,26,70,24],[91,4,71,2],[91,10,71,8,"diffMs"],[91,16,71,14],[91,19,71,17,"now"],[91,22,71,20],[91,23,71,21,"getTime"],[91,30,71,28],[91,31,71,29],[91,32,71,30],[91,35,71,33,"played"],[91,41,71,39],[91,42,71,40,"getTime"],[91,49,71,47],[91,50,71,48],[91,51,71,49],[92,4,72,2],[92,10,72,8,"diffMins"],[92,18,72,16],[92,21,72,19,"Math"],[92,25,72,23],[92,26,72,24,"floor"],[92,31,72,29],[92,32,72,30,"diffMs"],[92,38,72,36],[92,41,72,39],[92,46,72,44],[92,47,72,45],[93,4,74,2],[93,8,74,6,"diffMins"],[93,16,74,14],[93,19,74,17],[93,20,74,18],[93,22,74,20],[93,29,74,27],[93,39,74,37],[94,4,75,2],[94,8,75,6,"diffMins"],[94,16,75,14],[94,21,75,19],[94,22,75,20],[94,24,75,22],[94,31,75,29],[94,42,75,40],[95,4,76,2],[95,8,76,6,"diffMins"],[95,16,76,14],[95,19,76,17],[95,21,76,19],[95,23,76,21],[95,30,76,28],[95,33,76,31,"diffMins"],[95,41,76,39],[95,51,76,49],[96,4,78,2],[96,10,78,8,"diffHours"],[96,19,78,17],[96,22,78,20,"Math"],[96,26,78,24],[96,27,78,25,"floor"],[96,32,78,30],[96,33,78,31,"diffMins"],[96,41,78,39],[96,44,78,42],[96,46,78,44],[96,47,78,45],[97,4,79,2],[97,8,79,6,"diffHours"],[97,17,79,15],[97,22,79,20],[97,23,79,21],[97,25,79,23],[97,32,79,30],[97,44,79,42],[98,4,80,2],[98,8,80,6,"diffHours"],[98,17,80,15],[98,20,80,18],[98,22,80,20],[98,24,80,22],[98,31,80,29],[98,34,80,32,"diffHours"],[98,43,80,41],[98,55,80,53],[99,4,82,2],[99,10,82,8,"diffDays"],[99,18,82,16],[99,21,82,19,"Math"],[99,25,82,23],[99,26,82,24,"floor"],[99,31,82,29],[99,32,82,30,"diffHours"],[99,41,82,39],[99,44,82,42],[99,46,82,44],[99,47,82,45],[100,4,83,2],[100,8,83,6,"diffDays"],[100,16,83,14],[100,21,83,19],[100,22,83,20],[100,24,83,22],[100,31,83,29],[100,42,83,40],[101,4,84,2],[101,11,84,9],[101,14,84,12,"diffDays"],[101,22,84,20],[101,33,84,31],[102,2,85,0],[102,3,85,1],[103,0,85,2],[103,3]],"functionMap":{"names":["<global>","getRecentlyPlayed","likeSong","formatPlayedTime"],"mappings":"AAA;iCCiB;CDqB;wBEK;CFmB;gCGK;CHiB"},"hasCjsExports":false},"type":"js/module"}]}