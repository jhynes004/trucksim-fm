{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getCurrentSong\", {\n    enumerable: true,\n    get: function () {\n      return getCurrentSong;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _expoVirtualEnv = require(_dependencyMap[1], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Smart title case that preserves certain patterns\n   */\n  var smartTitleCase = str => {\n    // Preserve common patterns\n    var preservePatterns = ['DJ', 'MC', 'ft', 'feat', 'vs', 'x'];\n    return str.split(' ').map(word => {\n      var lower = word.toLowerCase();\n\n      // Check if it's a special pattern to preserve\n      if (preservePatterns.some(p => lower === p || lower === p + '.')) {\n        return lower;\n      }\n\n      // Handle words with parentheses or brackets\n      if (word.includes('(') || word.includes('[')) {\n        return word.split(/([(\\[])/g).map(part => {\n          if (part === '(' || part === '[') return part;\n          return part.charAt(0).toUpperCase() + part.slice(1).toLowerCase();\n        }).join('');\n      }\n\n      // Regular title case\n      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\n    }).join(' ');\n  };\n\n  /**\n   * Parse artist - title format with all variations\n   */\n  var parseSongString = text => {\n    // Try different separator patterns\n    var separators = [' - ', ' – ', ' — ', ' | ', ' / '];\n    for (var sep of separators) {\n      var index = text.indexOf(sep);\n      if (index > 0) {\n        var artist = text.substring(0, index).trim();\n        var title = text.substring(index + sep.length).trim();\n        if (artist && title) {\n          return {\n            artist: smartTitleCase(artist),\n            title: smartTitleCase(title)\n          };\n        }\n      }\n    }\n    return null;\n  };\n\n  /**\n   * Fetch the current playing song from TruckSimFM via backend proxy\n   */\n  var getCurrentSong = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator.default)(function* () {\n      try {\n        console.log('[RadioService] Fetching from backend:', `${BACKEND_URL}/api/current-song`);\n        var response = yield axios.default.get(`${BACKEND_URL}/api/current-song`, {\n          timeout: 8000\n        });\n        console.log('[RadioService] Response:', response.data);\n        if (!response.data || !response.data.success) {\n          throw new Error('Backend returned unsuccessful response');\n        }\n        var songText = response.data.data;\n        console.log('[RadioService] Song text:', songText);\n        if (typeof songText === 'string') {\n          var trimmed = songText.trim();\n\n          // Try to parse it\n          var parsed = parseSongString(trimmed);\n          if (parsed) {\n            console.log('[RadioService] Parsed successfully:', parsed);\n            return {\n              artist: parsed.artist,\n              title: parsed.title,\n              rawData: songText\n            };\n          }\n          console.log('[RadioService] Could not parse, returning as title only');\n          // If parsing fails, return as title\n          return {\n            title: smartTitleCase(trimmed),\n            artist: 'Unknown Artist',\n            rawData: songText\n          };\n        }\n        console.log('[RadioService] Unexpected data format');\n        throw new Error('Unexpected data format');\n      } catch (error) {\n        console.error('[RadioService] Error:', error);\n        if (axios.default.isAxiosError(error)) {\n          console.error('[RadioService] Axios error:', {\n            message: error.message,\n            status: error.response?.status,\n            data: error.response?.data\n          });\n        }\n        return {\n          title: 'TruckSimFM',\n          artist: 'Live Radio'\n        };\n      }\n    });\n    return function getCurrentSong() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n});","lineCount":131,"map":[[12,2,71,0,"Object"],[12,8,71,0],[12,9,71,0,"defineProperty"],[12,23,71,0],[12,24,71,0,"exports"],[12,31,71,0],[13,4,71,0,"enumerable"],[13,14,71,0],[14,4,71,0,"get"],[14,7,71,0],[14,18,71,0,"get"],[14,19,71,0],[15,6,71,0],[15,13,71,0,"getCurrentSong"],[15,27,71,0],[16,4,71,0],[17,2,71,0],[18,2,129,2],[18,6,129,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,129,2],[18,45,129,2,"require"],[18,52,129,2],[18,53,129,2,"_dependencyMap"],[18,67,129,2],[19,2,129,2],[19,6,129,2,"_asyncToGenerator"],[19,23,129,2],[19,26,129,2,"_interopDefault"],[19,41,129,2],[19,42,129,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,129,2],[20,2,129,2],[20,6,129,2,"_expoVirtualEnv"],[20,21,129,2],[20,24,129,2,"require"],[20,31,129,2],[20,32,129,2,"_dependencyMap"],[20,46,129,2],[21,2,1,0],[21,6,1,0,"_axios"],[21,12,1,0],[21,15,1,0,"require"],[21,22,1,0],[21,23,1,0,"_dependencyMap"],[21,37,1,0],[22,2,1,0],[22,6,1,0,"axios"],[22,11,1,0],[22,14,1,0,"_interopDefault"],[22,29,1,0],[22,30,1,0,"_axios"],[22,36,1,0],[23,2,3,0],[23,6,3,6,"BACKEND_URL"],[23,17,3,17],[23,20,3,20,"_expoVirtualEnv"],[23,35,3,20],[23,36,3,20,"env"],[23,39,3,20],[23,40,3,20,"EXPO_PUBLIC_BACKEND_URL"],[23,63,3,20],[23,67,3,59],[23,69,3,61],[24,2,12,0],[25,0,13,0],[26,0,14,0],[27,2,15,0],[27,6,15,6,"smartTitleCase"],[27,20,15,20],[27,23,15,24,"str"],[27,26,15,35],[27,30,15,48],[28,4,16,2],[29,4,17,2],[29,8,17,8,"preservePatterns"],[29,24,17,24],[29,27,17,27],[29,28,17,28],[29,32,17,32],[29,34,17,34],[29,38,17,38],[29,40,17,40],[29,44,17,44],[29,46,17,46],[29,52,17,52],[29,54,17,54],[29,58,17,58],[29,60,17,60],[29,63,17,63],[29,64,17,64],[30,4,19,2],[30,11,19,9,"str"],[30,14,19,12],[30,15,20,5,"split"],[30,20,20,10],[30,21,20,11],[30,24,20,14],[30,25,20,15],[30,26,21,5,"map"],[30,29,21,8],[30,30,21,9,"word"],[30,34,21,13],[30,38,21,17],[31,6,22,6],[31,10,22,12,"lower"],[31,15,22,17],[31,18,22,20,"word"],[31,22,22,24],[31,23,22,25,"toLowerCase"],[31,34,22,36],[31,35,22,37],[31,36,22,38],[33,6,24,6],[34,6,25,6],[34,10,25,10,"preservePatterns"],[34,26,25,26],[34,27,25,27,"some"],[34,31,25,31],[34,32,25,32,"p"],[34,33,25,33],[34,37,25,37,"lower"],[34,42,25,42],[34,47,25,47,"p"],[34,48,25,48],[34,52,25,52,"lower"],[34,57,25,57],[34,62,25,62,"p"],[34,63,25,63],[34,66,25,66],[34,69,25,69],[34,70,25,70],[34,72,25,72],[35,8,26,8],[35,15,26,15,"lower"],[35,20,26,20],[36,6,27,6],[38,6,29,6],[39,6,30,6],[39,10,30,10,"word"],[39,14,30,14],[39,15,30,15,"includes"],[39,23,30,23],[39,24,30,24],[39,27,30,27],[39,28,30,28],[39,32,30,32,"word"],[39,36,30,36],[39,37,30,37,"includes"],[39,45,30,45],[39,46,30,46],[39,49,30,49],[39,50,30,50],[39,52,30,52],[40,8,31,8],[40,15,31,15,"word"],[40,19,31,19],[40,20,31,20,"split"],[40,25,31,25],[40,26,31,26],[40,36,31,36],[40,37,31,37],[40,38,31,38,"map"],[40,41,31,41],[40,42,31,42,"part"],[40,46,31,46],[40,50,31,50],[41,10,32,10],[41,14,32,14,"part"],[41,18,32,18],[41,23,32,23],[41,26,32,26],[41,30,32,30,"part"],[41,34,32,34],[41,39,32,39],[41,42,32,42],[41,44,32,44],[41,51,32,51,"part"],[41,55,32,55],[42,10,33,10],[42,17,33,17,"part"],[42,21,33,21],[42,22,33,22,"charAt"],[42,28,33,28],[42,29,33,29],[42,30,33,30],[42,31,33,31],[42,32,33,32,"toUpperCase"],[42,43,33,43],[42,44,33,44],[42,45,33,45],[42,48,33,48,"part"],[42,52,33,52],[42,53,33,53,"slice"],[42,58,33,58],[42,59,33,59],[42,60,33,60],[42,61,33,61],[42,62,33,62,"toLowerCase"],[42,73,33,73],[42,74,33,74],[42,75,33,75],[43,8,34,8],[43,9,34,9],[43,10,34,10],[43,11,34,11,"join"],[43,15,34,15],[43,16,34,16],[43,18,34,18],[43,19,34,19],[44,6,35,6],[46,6,37,6],[47,6,38,6],[47,13,38,13,"word"],[47,17,38,17],[47,18,38,18,"charAt"],[47,24,38,24],[47,25,38,25],[47,26,38,26],[47,27,38,27],[47,28,38,28,"toUpperCase"],[47,39,38,39],[47,40,38,40],[47,41,38,41],[47,44,38,44,"word"],[47,48,38,48],[47,49,38,49,"slice"],[47,54,38,54],[47,55,38,55],[47,56,38,56],[47,57,38,57],[47,58,38,58,"toLowerCase"],[47,69,38,69],[47,70,38,70],[47,71,38,71],[48,4,39,4],[48,5,39,5],[48,6,39,6],[48,7,40,5,"join"],[48,11,40,9],[48,12,40,10],[48,15,40,13],[48,16,40,14],[49,2,41,0],[49,3,41,1],[51,2,43,0],[52,0,44,0],[53,0,45,0],[54,2,46,0],[54,6,46,6,"parseSongString"],[54,21,46,21],[54,24,46,25,"text"],[54,28,46,37],[54,32,46,84],[55,4,47,2],[56,4,48,2],[56,8,48,8,"separators"],[56,18,48,18],[56,21,48,21],[56,22,48,22],[56,27,48,27],[56,29,48,29],[56,34,48,34],[56,36,48,36],[56,41,48,41],[56,43,48,43],[56,48,48,48],[56,50,48,50],[56,55,48,55],[56,56,48,56],[57,4,50,2],[57,9,50,7],[57,13,50,13,"sep"],[57,16,50,16],[57,20,50,20,"separators"],[57,30,50,30],[57,32,50,32],[58,6,51,4],[58,10,51,10,"index"],[58,15,51,15],[58,18,51,18,"text"],[58,22,51,22],[58,23,51,23,"indexOf"],[58,30,51,30],[58,31,51,31,"sep"],[58,34,51,34],[58,35,51,35],[59,6,52,4],[59,10,52,8,"index"],[59,15,52,13],[59,18,52,16],[59,19,52,17],[59,21,52,19],[60,8,53,6],[60,12,53,12,"artist"],[60,18,53,18],[60,21,53,21,"text"],[60,25,53,25],[60,26,53,26,"substring"],[60,35,53,35],[60,36,53,36],[60,37,53,37],[60,39,53,39,"index"],[60,44,53,44],[60,45,53,45],[60,46,53,46,"trim"],[60,50,53,50],[60,51,53,51],[60,52,53,52],[61,8,54,6],[61,12,54,12,"title"],[61,17,54,17],[61,20,54,20,"text"],[61,24,54,24],[61,25,54,25,"substring"],[61,34,54,34],[61,35,54,35,"index"],[61,40,54,40],[61,43,54,43,"sep"],[61,46,54,46],[61,47,54,47,"length"],[61,53,54,53],[61,54,54,54],[61,55,54,55,"trim"],[61,59,54,59],[61,60,54,60],[61,61,54,61],[62,8,56,6],[62,12,56,10,"artist"],[62,18,56,16],[62,22,56,20,"title"],[62,27,56,25],[62,29,56,27],[63,10,57,8],[63,17,57,15],[64,12,58,10,"artist"],[64,18,58,16],[64,20,58,18,"smartTitleCase"],[64,34,58,32],[64,35,58,33,"artist"],[64,41,58,39],[64,42,58,40],[65,12,59,10,"title"],[65,17,59,15],[65,19,59,17,"smartTitleCase"],[65,33,59,31],[65,34,59,32,"title"],[65,39,59,37],[66,10,60,8],[66,11,60,9],[67,8,61,6],[68,6,62,4],[69,4,63,2],[70,4,65,2],[70,11,65,9],[70,15,65,13],[71,2,66,0],[71,3,66,1],[73,2,68,0],[74,0,69,0],[75,0,70,0],[76,2,71,7],[76,6,71,13,"getCurrentSong"],[76,20,71,27],[77,4,71,27],[77,8,71,27,"_ref"],[77,12,71,27],[77,19,71,27,"_asyncToGenerator"],[77,36,71,27],[77,37,71,27,"default"],[77,44,71,27],[77,46,71,30],[77,59,71,64],[78,6,72,2],[78,10,72,6],[79,8,73,4,"console"],[79,15,73,11],[79,16,73,12,"log"],[79,19,73,15],[79,20,73,16],[79,59,73,55],[79,61,73,57],[79,64,73,60,"BACKEND_URL"],[79,75,73,71],[79,94,73,90],[79,95,73,91],[80,8,75,4],[80,12,75,10,"response"],[80,20,75,18],[80,29,75,27,"axios"],[80,34,75,32],[80,35,75,32,"default"],[80,42,75,32],[80,43,75,33,"get"],[80,46,75,36],[80,47,75,37],[80,50,75,40,"BACKEND_URL"],[80,61,75,51],[80,80,75,70],[80,82,75,72],[81,10,76,6,"timeout"],[81,17,76,13],[81,19,76,15],[82,8,77,4],[82,9,77,5],[82,10,77,6],[83,8,79,4,"console"],[83,15,79,11],[83,16,79,12,"log"],[83,19,79,15],[83,20,79,16],[83,46,79,42],[83,48,79,44,"response"],[83,56,79,52],[83,57,79,53,"data"],[83,61,79,57],[83,62,79,58],[84,8,81,4],[84,12,81,8],[84,13,81,9,"response"],[84,21,81,17],[84,22,81,18,"data"],[84,26,81,22],[84,30,81,26],[84,31,81,27,"response"],[84,39,81,35],[84,40,81,36,"data"],[84,44,81,40],[84,45,81,41,"success"],[84,52,81,48],[84,54,81,50],[85,10,82,6],[85,16,82,12],[85,20,82,16,"Error"],[85,25,82,21],[85,26,82,22],[85,66,82,62],[85,67,82,63],[86,8,83,4],[87,8,85,4],[87,12,85,10,"songText"],[87,20,85,18],[87,23,85,21,"response"],[87,31,85,29],[87,32,85,30,"data"],[87,36,85,34],[87,37,85,35,"data"],[87,41,85,39],[88,8,86,4,"console"],[88,15,86,11],[88,16,86,12,"log"],[88,19,86,15],[88,20,86,16],[88,47,86,43],[88,49,86,45,"songText"],[88,57,86,53],[88,58,86,54],[89,8,88,4],[89,12,88,8],[89,19,88,15,"songText"],[89,27,88,23],[89,32,88,28],[89,40,88,36],[89,42,88,38],[90,10,89,6],[90,14,89,12,"trimmed"],[90,21,89,19],[90,24,89,22,"songText"],[90,32,89,30],[90,33,89,31,"trim"],[90,37,89,35],[90,38,89,36],[90,39,89,37],[92,10,91,6],[93,10,92,6],[93,14,92,12,"parsed"],[93,20,92,18],[93,23,92,21,"parseSongString"],[93,38,92,36],[93,39,92,37,"trimmed"],[93,46,92,44],[93,47,92,45],[94,10,94,6],[94,14,94,10,"parsed"],[94,20,94,16],[94,22,94,18],[95,12,95,8,"console"],[95,19,95,15],[95,20,95,16,"log"],[95,23,95,19],[95,24,95,20],[95,61,95,57],[95,63,95,59,"parsed"],[95,69,95,65],[95,70,95,66],[96,12,96,8],[96,19,96,15],[97,14,97,10,"artist"],[97,20,97,16],[97,22,97,18,"parsed"],[97,28,97,24],[97,29,97,25,"artist"],[97,35,97,31],[98,14,98,10,"title"],[98,19,98,15],[98,21,98,17,"parsed"],[98,27,98,23],[98,28,98,24,"title"],[98,33,98,29],[99,14,99,10,"rawData"],[99,21,99,17],[99,23,99,19,"songText"],[100,12,100,8],[100,13,100,9],[101,10,101,6],[102,10,103,6,"console"],[102,17,103,13],[102,18,103,14,"log"],[102,21,103,17],[102,22,103,18],[102,79,103,75],[102,80,103,76],[103,10,104,6],[104,10,105,6],[104,17,105,13],[105,12,106,8,"title"],[105,17,106,13],[105,19,106,15,"smartTitleCase"],[105,33,106,29],[105,34,106,30,"trimmed"],[105,41,106,37],[105,42,106,38],[106,12,107,8,"artist"],[106,18,107,14],[106,20,107,16],[106,36,107,32],[107,12,108,8,"rawData"],[107,19,108,15],[107,21,108,17,"songText"],[108,10,109,6],[108,11,109,7],[109,8,110,4],[110,8,112,4,"console"],[110,15,112,11],[110,16,112,12,"log"],[110,19,112,15],[110,20,112,16],[110,59,112,55],[110,60,112,56],[111,8,113,4],[111,14,113,10],[111,18,113,14,"Error"],[111,23,113,19],[111,24,113,20],[111,48,113,44],[111,49,113,45],[112,6,115,2],[112,7,115,3],[112,8,115,4],[112,15,115,11,"error"],[112,20,115,16],[112,22,115,18],[113,8,116,4,"console"],[113,15,116,11],[113,16,116,12,"error"],[113,21,116,17],[113,22,116,18],[113,45,116,41],[113,47,116,43,"error"],[113,52,116,48],[113,53,116,49],[114,8,117,4],[114,12,117,8,"axios"],[114,17,117,13],[114,18,117,13,"default"],[114,25,117,13],[114,26,117,14,"isAxiosError"],[114,38,117,26],[114,39,117,27,"error"],[114,44,117,32],[114,45,117,33],[114,47,117,35],[115,10,118,6,"console"],[115,17,118,13],[115,18,118,14,"error"],[115,23,118,19],[115,24,118,20],[115,53,118,49],[115,55,118,51],[116,12,119,8,"message"],[116,19,119,15],[116,21,119,17,"error"],[116,26,119,22],[116,27,119,23,"message"],[116,34,119,30],[117,12,120,8,"status"],[117,18,120,14],[117,20,120,16,"error"],[117,25,120,21],[117,26,120,22,"response"],[117,34,120,30],[117,36,120,32,"status"],[117,42,120,38],[118,12,121,8,"data"],[118,16,121,12],[118,18,121,14,"error"],[118,23,121,19],[118,24,121,20,"response"],[118,32,121,28],[118,34,121,30,"data"],[119,10,122,6],[119,11,122,7],[119,12,122,8],[120,8,123,4],[121,8,124,4],[121,15,124,11],[122,10,125,6,"title"],[122,15,125,11],[122,17,125,13],[122,29,125,25],[123,10,126,6,"artist"],[123,16,126,12],[123,18,126,14],[124,8,127,4],[124,9,127,5],[125,6,128,2],[126,4,129,0],[126,5,129,1],[127,4,129,1],[127,20,71,13,"getCurrentSong"],[127,34,71,27,"getCurrentSong"],[127,35,71,27],[128,6,71,27],[128,13,71,27,"_ref"],[128,17,71,27],[128,18,71,27,"apply"],[128,23,71,27],[128,30,71,27,"arguments"],[128,39,71,27],[129,4,71,27],[130,2,71,27],[130,5,129,1],[131,0,129,2],[131,3]],"functionMap":{"names":["<global>","smartTitleCase","str.split.map$argument_0","preservePatterns.some$argument_0","word.split.map$argument_0","parseSongString","getCurrentSong"],"mappings":"AAA;uBCc;SCM;gCCI,qCD;0CEM;SFG;KDK;CDE;wBKK;CLoB;8BMK;CN0D"},"hasCjsExports":false},"type":"js/module"}]}