{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getRecentlyPlayed\", {\n    enumerable: true,\n    get: function () {\n      return getRecentlyPlayed;\n    }\n  });\n  Object.defineProperty(exports, \"formatPlayedTime\", {\n    enumerable: true,\n    get: function () {\n      return formatPlayedTime;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Fetch recently played tracks from the TruckSimFM playlist\n   */\n  const getRecentlyPlayed = async (limit = 5) => {\n    try {\n      console.log('[RecentlyPlayedService] Fetching recently played tracks');\n      const response = await axios.default.get(`${BACKEND_URL}/api/recently-played`, {\n        params: {\n          limit\n        },\n        timeout: 10000\n      });\n      if (response.data && response.data.success && Array.isArray(response.data.data)) {\n        console.log(`[RecentlyPlayedService] Fetched ${response.data.data.length} tracks`);\n        return response.data.data;\n      }\n      console.log('[RecentlyPlayedService] Invalid response, returning empty array');\n      return [];\n    } catch (error) {\n      console.error('[RecentlyPlayedService] Error fetching recently played:', error);\n      return [];\n    }\n  };\n\n  /**\n   * Format the played time as a relative string (e.g., \"2 min ago\")\n   */\n  const formatPlayedTime = isoTime => {\n    const played = new Date(isoTime);\n    const now = new Date();\n    const diffMs = now.getTime() - played.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    if (diffMins < 1) return 'Just now';\n    if (diffMins === 1) return '1 min ago';\n    if (diffMins < 60) return `${diffMins} min ago`;\n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours === 1) return '1 hour ago';\n    if (diffHours < 24) return `${diffHours} hours ago`;\n    const diffDays = Math.floor(diffHours / 24);\n    if (diffDays === 1) return '1 day ago';\n    return `${diffDays} days ago`;\n  };\n});","lineCount":70,"map":[[12,2,16,0,"Object"],[12,8,16,0],[12,9,16,0,"defineProperty"],[12,23,16,0],[12,24,16,0,"exports"],[12,31,16,0],[13,4,16,0,"enumerable"],[13,14,16,0],[14,4,16,0,"get"],[14,7,16,0],[14,18,16,0,"get"],[14,19,16,0],[15,6,16,0],[15,13,16,0,"getRecentlyPlayed"],[15,30,16,0],[16,4,16,0],[17,2,16,0],[18,2,42,0,"Object"],[18,8,42,0],[18,9,42,0,"defineProperty"],[18,23,42,0],[18,24,42,0,"exports"],[18,31,42,0],[19,4,42,0,"enumerable"],[19,14,42,0],[20,4,42,0,"get"],[20,7,42,0],[20,18,42,0,"get"],[20,19,42,0],[21,6,42,0],[21,13,42,0,"formatPlayedTime"],[21,29,42,0],[22,4,42,0],[23,2,42,0],[24,2,59,2],[24,6,59,2,"_expoVirtualEnv"],[24,21,59,2],[24,24,59,2,"require"],[24,31,59,2],[24,32,59,2,"_dependencyMap"],[24,46,59,2],[25,2,1,0],[25,6,1,0,"_axios"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,1,0],[26,6,1,0,"axios"],[26,11,1,0],[26,14,1,0,"_interopDefault"],[26,29,1,0],[26,30,1,0,"_axios"],[26,36,1,0],[27,2,3,0],[27,8,3,6,"BACKEND_URL"],[27,19,3,17],[27,22,3,20,"_expoVirtualEnv"],[27,37,3,20],[27,38,3,20,"env"],[27,41,3,20],[27,42,3,20,"EXPO_PUBLIC_BACKEND_URL"],[27,65,3,20],[27,69,3,59],[27,71,3,61],[28,2,13,0],[29,0,14,0],[30,0,15,0],[31,2,16,7],[31,8,16,13,"getRecentlyPlayed"],[31,25,16,30],[31,28,16,33],[31,34,16,33,"getRecentlyPlayed"],[31,35,16,40,"limit"],[31,40,16,53],[31,43,16,56],[31,44,16,57],[31,49,16,94],[32,4,17,2],[32,8,17,6],[33,6,18,4,"console"],[33,13,18,11],[33,14,18,12,"log"],[33,17,18,15],[33,18,18,16],[33,75,18,73],[33,76,18,74],[34,6,20,4],[34,12,20,10,"response"],[34,20,20,18],[34,23,20,21],[34,29,20,27,"axios"],[34,34,20,32],[34,35,20,32,"default"],[34,42,20,32],[34,43,20,33,"get"],[34,46,20,36],[34,47,20,37],[34,50,20,40,"BACKEND_URL"],[34,61,20,51],[34,83,20,73],[34,85,20,75],[35,8,21,6,"params"],[35,14,21,12],[35,16,21,14],[36,10,21,16,"limit"],[37,8,21,22],[37,9,21,23],[38,8,22,6,"timeout"],[38,15,22,13],[38,17,22,15],[39,6,23,4],[39,7,23,5],[39,8,23,6],[40,6,25,4],[40,10,25,8,"response"],[40,18,25,16],[40,19,25,17,"data"],[40,23,25,21],[40,27,25,25,"response"],[40,35,25,33],[40,36,25,34,"data"],[40,40,25,38],[40,41,25,39,"success"],[40,48,25,46],[40,52,25,50,"Array"],[40,57,25,55],[40,58,25,56,"isArray"],[40,65,25,63],[40,66,25,64,"response"],[40,74,25,72],[40,75,25,73,"data"],[40,79,25,77],[40,80,25,78,"data"],[40,84,25,82],[40,85,25,83],[40,87,25,85],[41,8,26,6,"console"],[41,15,26,13],[41,16,26,14,"log"],[41,19,26,17],[41,20,26,18],[41,55,26,53,"response"],[41,63,26,61],[41,64,26,62,"data"],[41,68,26,66],[41,69,26,67,"data"],[41,73,26,71],[41,74,26,72,"length"],[41,80,26,78],[41,89,26,87],[41,90,26,88],[42,8,27,6],[42,15,27,13,"response"],[42,23,27,21],[42,24,27,22,"data"],[42,28,27,26],[42,29,27,27,"data"],[42,33,27,31],[43,6,28,4],[44,6,30,4,"console"],[44,13,30,11],[44,14,30,12,"log"],[44,17,30,15],[44,18,30,16],[44,83,30,81],[44,84,30,82],[45,6,31,4],[45,13,31,11],[45,15,31,13],[46,4,33,2],[46,5,33,3],[46,6,33,4],[46,13,33,11,"error"],[46,18,33,16],[46,20,33,18],[47,6,34,4,"console"],[47,13,34,11],[47,14,34,12,"error"],[47,19,34,17],[47,20,34,18],[47,77,34,75],[47,79,34,77,"error"],[47,84,34,82],[47,85,34,83],[48,6,35,4],[48,13,35,11],[48,15,35,13],[49,4,36,2],[50,2,37,0],[50,3,37,1],[52,2,39,0],[53,0,40,0],[54,0,41,0],[55,2,42,7],[55,8,42,13,"formatPlayedTime"],[55,24,42,29],[55,27,42,33,"isoTime"],[55,34,42,48],[55,38,42,61],[56,4,43,2],[56,10,43,8,"played"],[56,16,43,14],[56,19,43,17],[56,23,43,21,"Date"],[56,27,43,25],[56,28,43,26,"isoTime"],[56,35,43,33],[56,36,43,34],[57,4,44,2],[57,10,44,8,"now"],[57,13,44,11],[57,16,44,14],[57,20,44,18,"Date"],[57,24,44,22],[57,25,44,23],[57,26,44,24],[58,4,45,2],[58,10,45,8,"diffMs"],[58,16,45,14],[58,19,45,17,"now"],[58,22,45,20],[58,23,45,21,"getTime"],[58,30,45,28],[58,31,45,29],[58,32,45,30],[58,35,45,33,"played"],[58,41,45,39],[58,42,45,40,"getTime"],[58,49,45,47],[58,50,45,48],[58,51,45,49],[59,4,46,2],[59,10,46,8,"diffMins"],[59,18,46,16],[59,21,46,19,"Math"],[59,25,46,23],[59,26,46,24,"floor"],[59,31,46,29],[59,32,46,30,"diffMs"],[59,38,46,36],[59,41,46,39],[59,46,46,44],[59,47,46,45],[60,4,48,2],[60,8,48,6,"diffMins"],[60,16,48,14],[60,19,48,17],[60,20,48,18],[60,22,48,20],[60,29,48,27],[60,39,48,37],[61,4,49,2],[61,8,49,6,"diffMins"],[61,16,49,14],[61,21,49,19],[61,22,49,20],[61,24,49,22],[61,31,49,29],[61,42,49,40],[62,4,50,2],[62,8,50,6,"diffMins"],[62,16,50,14],[62,19,50,17],[62,21,50,19],[62,23,50,21],[62,30,50,28],[62,33,50,31,"diffMins"],[62,41,50,39],[62,51,50,49],[63,4,52,2],[63,10,52,8,"diffHours"],[63,19,52,17],[63,22,52,20,"Math"],[63,26,52,24],[63,27,52,25,"floor"],[63,32,52,30],[63,33,52,31,"diffMins"],[63,41,52,39],[63,44,52,42],[63,46,52,44],[63,47,52,45],[64,4,53,2],[64,8,53,6,"diffHours"],[64,17,53,15],[64,22,53,20],[64,23,53,21],[64,25,53,23],[64,32,53,30],[64,44,53,42],[65,4,54,2],[65,8,54,6,"diffHours"],[65,17,54,15],[65,20,54,18],[65,22,54,20],[65,24,54,22],[65,31,54,29],[65,34,54,32,"diffHours"],[65,43,54,41],[65,55,54,53],[66,4,56,2],[66,10,56,8,"diffDays"],[66,18,56,16],[66,21,56,19,"Math"],[66,25,56,23],[66,26,56,24,"floor"],[66,31,56,29],[66,32,56,30,"diffHours"],[66,41,56,39],[66,44,56,42],[66,46,56,44],[66,47,56,45],[67,4,57,2],[67,8,57,6,"diffDays"],[67,16,57,14],[67,21,57,19],[67,22,57,20],[67,24,57,22],[67,31,57,29],[67,42,57,40],[68,4,58,2],[68,11,58,9],[68,14,58,12,"diffDays"],[68,22,58,20],[68,33,58,31],[69,2,59,0],[69,3,59,1],[70,0,59,2],[70,3]],"functionMap":{"names":["<global>","getRecentlyPlayed","formatPlayedTime"],"mappings":"AAA;iCCe;CDqB;gCEK;CFiB"},"hasCjsExports":false},"type":"js/module"}]}