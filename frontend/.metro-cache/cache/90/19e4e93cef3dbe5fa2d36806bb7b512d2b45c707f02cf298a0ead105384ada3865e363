{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"getRecentlyPlayed\", {\n    enumerable: true,\n    get: function () {\n      return getRecentlyPlayed;\n    }\n  });\n  Object.defineProperty(exports, \"likeSong\", {\n    enumerable: true,\n    get: function () {\n      return likeSong;\n    }\n  });\n  Object.defineProperty(exports, \"formatPlayedTime\", {\n    enumerable: true,\n    get: function () {\n      return formatPlayedTime;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  const BACKEND_URL = process.env.EXPO_PUBLIC_BACKEND_URL || '';\n  /**\n   * Fetch recently played tracks from the TruckSimFM playlist\n   */\n  const getRecentlyPlayed = async (limit = 5) => {\n    try {\n      console.log('[RecentlyPlayedService] Fetching recently played tracks');\n      const response = await axios.default.get(`${BACKEND_URL}/api/recently-played`, {\n        params: {\n          limit\n        },\n        timeout: 10000\n      });\n      if (response.data && response.data.success && Array.isArray(response.data.data)) {\n        console.log(`[RecentlyPlayedService] Fetched ${response.data.data.length} tracks`);\n        return response.data.data;\n      }\n      console.log('[RecentlyPlayedService] Invalid response, returning empty array');\n      return [];\n    } catch (error) {\n      console.error('[RecentlyPlayedService] Error fetching recently played:', error);\n      return [];\n    }\n  };\n\n  /**\n   * Like a song on TruckSimFM\n   */\n  const likeSong = async documentId => {\n    try {\n      console.log('[RecentlyPlayedService] Liking song:', documentId);\n      const response = await axios.default.post(`${BACKEND_URL}/api/like-song/${documentId}`, {}, {\n        timeout: 10000\n      });\n      if (response.data && response.data.success) {\n        console.log('[RecentlyPlayedService] Song liked successfully, new count:', response.data.likes);\n        return {\n          success: true,\n          likes: response.data.likes\n        };\n      }\n      return {\n        success: false\n      };\n    } catch (error) {\n      console.error('[RecentlyPlayedService] Error liking song:', error);\n      return {\n        success: false\n      };\n    }\n  };\n\n  /**\n   * Format the played time as a relative string (e.g., \"2 min ago\")\n   */\n  const formatPlayedTime = isoTime => {\n    const played = new Date(isoTime);\n    const now = new Date();\n    const diffMs = now.getTime() - played.getTime();\n    const diffMins = Math.floor(diffMs / 60000);\n    if (diffMins < 1) return 'Just now';\n    if (diffMins === 1) return '1 min ago';\n    if (diffMins < 60) return `${diffMins} min ago`;\n    const diffHours = Math.floor(diffMins / 60);\n    if (diffHours === 1) return '1 hour ago';\n    if (diffHours < 24) return `${diffHours} hours ago`;\n    const diffDays = Math.floor(diffHours / 24);\n    if (diffDays === 1) return '1 day ago';\n    return `${diffDays} days ago`;\n  };\n});","lineCount":102,"map":[[12,2,18,0,"Object"],[12,8,18,0],[12,9,18,0,"defineProperty"],[12,23,18,0],[12,24,18,0,"exports"],[12,31,18,0],[13,4,18,0,"enumerable"],[13,14,18,0],[14,4,18,0,"get"],[14,7,18,0],[14,18,18,0,"get"],[14,19,18,0],[15,6,18,0],[15,13,18,0,"getRecentlyPlayed"],[15,30,18,0],[16,4,18,0],[17,2,18,0],[18,2,44,0,"Object"],[18,8,44,0],[18,9,44,0,"defineProperty"],[18,23,44,0],[18,24,44,0,"exports"],[18,31,44,0],[19,4,44,0,"enumerable"],[19,14,44,0],[20,4,44,0,"get"],[20,7,44,0],[20,18,44,0,"get"],[20,19,44,0],[21,6,44,0],[21,13,44,0,"likeSong"],[21,21,44,0],[22,4,44,0],[23,2,44,0],[24,2,68,0,"Object"],[24,8,68,0],[24,9,68,0,"defineProperty"],[24,23,68,0],[24,24,68,0,"exports"],[24,31,68,0],[25,4,68,0,"enumerable"],[25,14,68,0],[26,4,68,0,"get"],[26,7,68,0],[26,18,68,0,"get"],[26,19,68,0],[27,6,68,0],[27,13,68,0,"formatPlayedTime"],[27,29,68,0],[28,4,68,0],[29,2,68,0],[30,2,1,0],[30,6,1,0,"_axios"],[30,12,1,0],[30,15,1,0,"require"],[30,22,1,0],[30,23,1,0,"_dependencyMap"],[30,37,1,0],[31,2,1,0],[31,6,1,0,"axios"],[31,11,1,0],[31,14,1,0,"_interopDefault"],[31,29,1,0],[31,30,1,0,"_axios"],[31,36,1,0],[32,2,3,0],[32,8,3,6,"BACKEND_URL"],[32,19,3,17],[32,22,3,20,"process"],[32,29,3,27],[32,30,3,28,"env"],[32,33,3,31],[32,34,3,32,"EXPO_PUBLIC_BACKEND_URL"],[32,57,3,55],[32,61,3,59],[32,63,3,61],[33,2,15,0],[34,0,16,0],[35,0,17,0],[36,2,18,7],[36,8,18,13,"getRecentlyPlayed"],[36,25,18,30],[36,28,18,33],[36,34,18,33,"getRecentlyPlayed"],[36,35,18,40,"limit"],[36,40,18,53],[36,43,18,56],[36,44,18,57],[36,49,18,94],[37,4,19,2],[37,8,19,6],[38,6,20,4,"console"],[38,13,20,11],[38,14,20,12,"log"],[38,17,20,15],[38,18,20,16],[38,75,20,73],[38,76,20,74],[39,6,22,4],[39,12,22,10,"response"],[39,20,22,18],[39,23,22,21],[39,29,22,27,"axios"],[39,34,22,32],[39,35,22,32,"default"],[39,42,22,32],[39,43,22,33,"get"],[39,46,22,36],[39,47,22,37],[39,50,22,40,"BACKEND_URL"],[39,61,22,51],[39,83,22,73],[39,85,22,75],[40,8,23,6,"params"],[40,14,23,12],[40,16,23,14],[41,10,23,16,"limit"],[42,8,23,22],[42,9,23,23],[43,8,24,6,"timeout"],[43,15,24,13],[43,17,24,15],[44,6,25,4],[44,7,25,5],[44,8,25,6],[45,6,27,4],[45,10,27,8,"response"],[45,18,27,16],[45,19,27,17,"data"],[45,23,27,21],[45,27,27,25,"response"],[45,35,27,33],[45,36,27,34,"data"],[45,40,27,38],[45,41,27,39,"success"],[45,48,27,46],[45,52,27,50,"Array"],[45,57,27,55],[45,58,27,56,"isArray"],[45,65,27,63],[45,66,27,64,"response"],[45,74,27,72],[45,75,27,73,"data"],[45,79,27,77],[45,80,27,78,"data"],[45,84,27,82],[45,85,27,83],[45,87,27,85],[46,8,28,6,"console"],[46,15,28,13],[46,16,28,14,"log"],[46,19,28,17],[46,20,28,18],[46,55,28,53,"response"],[46,63,28,61],[46,64,28,62,"data"],[46,68,28,66],[46,69,28,67,"data"],[46,73,28,71],[46,74,28,72,"length"],[46,80,28,78],[46,89,28,87],[46,90,28,88],[47,8,29,6],[47,15,29,13,"response"],[47,23,29,21],[47,24,29,22,"data"],[47,28,29,26],[47,29,29,27,"data"],[47,33,29,31],[48,6,30,4],[49,6,32,4,"console"],[49,13,32,11],[49,14,32,12,"log"],[49,17,32,15],[49,18,32,16],[49,83,32,81],[49,84,32,82],[50,6,33,4],[50,13,33,11],[50,15,33,13],[51,4,35,2],[51,5,35,3],[51,6,35,4],[51,13,35,11,"error"],[51,18,35,16],[51,20,35,18],[52,6,36,4,"console"],[52,13,36,11],[52,14,36,12,"error"],[52,19,36,17],[52,20,36,18],[52,77,36,75],[52,79,36,77,"error"],[52,84,36,82],[52,85,36,83],[53,6,37,4],[53,13,37,11],[53,15,37,13],[54,4,38,2],[55,2,39,0],[55,3,39,1],[57,2,41,0],[58,0,42,0],[59,0,43,0],[60,2,44,7],[60,8,44,13,"likeSong"],[60,16,44,21],[60,19,44,24],[60,25,44,31,"documentId"],[60,35,44,49],[60,39,44,101],[61,4,45,2],[61,8,45,6],[62,6,46,4,"console"],[62,13,46,11],[62,14,46,12,"log"],[62,17,46,15],[62,18,46,16],[62,56,46,54],[62,58,46,56,"documentId"],[62,68,46,66],[62,69,46,67],[63,6,48,4],[63,12,48,10,"response"],[63,20,48,18],[63,23,48,21],[63,29,48,27,"axios"],[63,34,48,32],[63,35,48,32,"default"],[63,42,48,32],[63,43,48,33,"post"],[63,47,48,37],[63,48,48,38],[63,51,48,41,"BACKEND_URL"],[63,62,48,52],[63,80,48,70,"documentId"],[63,90,48,80],[63,92,48,82],[63,94,48,84],[63,95,48,85],[63,96,48,86],[63,98,48,88],[64,8,49,6,"timeout"],[64,15,49,13],[64,17,49,15],[65,6,50,4],[65,7,50,5],[65,8,50,6],[66,6,52,4],[66,10,52,8,"response"],[66,18,52,16],[66,19,52,17,"data"],[66,23,52,21],[66,27,52,25,"response"],[66,35,52,33],[66,36,52,34,"data"],[66,40,52,38],[66,41,52,39,"success"],[66,48,52,46],[66,50,52,48],[67,8,53,6,"console"],[67,15,53,13],[67,16,53,14,"log"],[67,19,53,17],[67,20,53,18],[67,81,53,79],[67,83,53,81,"response"],[67,91,53,89],[67,92,53,90,"data"],[67,96,53,94],[67,97,53,95,"likes"],[67,102,53,100],[67,103,53,101],[68,8,54,6],[68,15,54,13],[69,10,54,15,"success"],[69,17,54,22],[69,19,54,24],[69,23,54,28],[70,10,54,30,"likes"],[70,15,54,35],[70,17,54,37,"response"],[70,25,54,45],[70,26,54,46,"data"],[70,30,54,50],[70,31,54,51,"likes"],[71,8,54,57],[71,9,54,58],[72,6,55,4],[73,6,57,4],[73,13,57,11],[74,8,57,13,"success"],[74,15,57,20],[74,17,57,22],[75,6,57,28],[75,7,57,29],[76,4,59,2],[76,5,59,3],[76,6,59,4],[76,13,59,11,"error"],[76,18,59,16],[76,20,59,18],[77,6,60,4,"console"],[77,13,60,11],[77,14,60,12,"error"],[77,19,60,17],[77,20,60,18],[77,64,60,62],[77,66,60,64,"error"],[77,71,60,69],[77,72,60,70],[78,6,61,4],[78,13,61,11],[79,8,61,13,"success"],[79,15,61,20],[79,17,61,22],[80,6,61,28],[80,7,61,29],[81,4,62,2],[82,2,63,0],[82,3,63,1],[84,2,65,0],[85,0,66,0],[86,0,67,0],[87,2,68,7],[87,8,68,13,"formatPlayedTime"],[87,24,68,29],[87,27,68,33,"isoTime"],[87,34,68,48],[87,38,68,61],[88,4,69,2],[88,10,69,8,"played"],[88,16,69,14],[88,19,69,17],[88,23,69,21,"Date"],[88,27,69,25],[88,28,69,26,"isoTime"],[88,35,69,33],[88,36,69,34],[89,4,70,2],[89,10,70,8,"now"],[89,13,70,11],[89,16,70,14],[89,20,70,18,"Date"],[89,24,70,22],[89,25,70,23],[89,26,70,24],[90,4,71,2],[90,10,71,8,"diffMs"],[90,16,71,14],[90,19,71,17,"now"],[90,22,71,20],[90,23,71,21,"getTime"],[90,30,71,28],[90,31,71,29],[90,32,71,30],[90,35,71,33,"played"],[90,41,71,39],[90,42,71,40,"getTime"],[90,49,71,47],[90,50,71,48],[90,51,71,49],[91,4,72,2],[91,10,72,8,"diffMins"],[91,18,72,16],[91,21,72,19,"Math"],[91,25,72,23],[91,26,72,24,"floor"],[91,31,72,29],[91,32,72,30,"diffMs"],[91,38,72,36],[91,41,72,39],[91,46,72,44],[91,47,72,45],[92,4,74,2],[92,8,74,6,"diffMins"],[92,16,74,14],[92,19,74,17],[92,20,74,18],[92,22,74,20],[92,29,74,27],[92,39,74,37],[93,4,75,2],[93,8,75,6,"diffMins"],[93,16,75,14],[93,21,75,19],[93,22,75,20],[93,24,75,22],[93,31,75,29],[93,42,75,40],[94,4,76,2],[94,8,76,6,"diffMins"],[94,16,76,14],[94,19,76,17],[94,21,76,19],[94,23,76,21],[94,30,76,28],[94,33,76,31,"diffMins"],[94,41,76,39],[94,51,76,49],[95,4,78,2],[95,10,78,8,"diffHours"],[95,19,78,17],[95,22,78,20,"Math"],[95,26,78,24],[95,27,78,25,"floor"],[95,32,78,30],[95,33,78,31,"diffMins"],[95,41,78,39],[95,44,78,42],[95,46,78,44],[95,47,78,45],[96,4,79,2],[96,8,79,6,"diffHours"],[96,17,79,15],[96,22,79,20],[96,23,79,21],[96,25,79,23],[96,32,79,30],[96,44,79,42],[97,4,80,2],[97,8,80,6,"diffHours"],[97,17,80,15],[97,20,80,18],[97,22,80,20],[97,24,80,22],[97,31,80,29],[97,34,80,32,"diffHours"],[97,43,80,41],[97,55,80,53],[98,4,82,2],[98,10,82,8,"diffDays"],[98,18,82,16],[98,21,82,19,"Math"],[98,25,82,23],[98,26,82,24,"floor"],[98,31,82,29],[98,32,82,30,"diffHours"],[98,41,82,39],[98,44,82,42],[98,46,82,44],[98,47,82,45],[99,4,83,2],[99,8,83,6,"diffDays"],[99,16,83,14],[99,21,83,19],[99,22,83,20],[99,24,83,22],[99,31,83,29],[99,42,83,40],[100,4,84,2],[100,11,84,9],[100,14,84,12,"diffDays"],[100,22,84,20],[100,33,84,31],[101,2,85,0],[101,3,85,1],[102,0,85,2],[102,3]],"functionMap":{"names":["<global>","getRecentlyPlayed","likeSong","formatPlayedTime"],"mappings":"AAA;iCCiB;CDqB;wBEK;CFmB;gCGK;CHiB"},"hasCjsExports":false},"type":"js/module"}]}